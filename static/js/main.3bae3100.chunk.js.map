{"version":3,"sources":["utils/session.js","client.js","utils/CognitoClient.js","assets/images/logo-white.png","utils/awsConfig.js","graphql/customQueries.js","assets/images/dashboard-design.PNG","pages/PortalDashboard.js","utils/useInterval.js","graphql/customMutations.js","assets/images/bubble-icon-1.svg","assets/images/bubble-icon-2.svg","assets/audio/ding.mp3","assets/images/white-checkmark.svg","assets/images/gray-checkmark.svg","components/PartyContainer.js","assets/images/down-arrow-gray.png","assets/images/down-arrow-blue.png","pages/PortalOrders.js","pages/PortalTermsService.js","components/RadioButton.js","assets/images/portal-menu-plus-button.svg","assets/images/portal-menu-x-button.svg","pages/PortalMenu.js","pages/PortalRewards.js","assets/images/location-icon.svg","assets/images/settings-design.PNG","assets/images/phone-icon.svg","assets/images/clock-icon.svg","pages/PortalSettings.js","assets/images/portal-orders-icon.svg","assets/images/portal-dashboard-icon.svg","assets/images/portal-terms-service-icon.svg","assets/images/portal-menu-icon.svg","assets/images/portal-rewards-icon.svg","assets/images/portal-settings-icon.svg","assets/images/portal-logout-icon.svg","pages/Portal.js","pages/PortalAuthentication.js","App.js","index.js"],"names":["getCurrentUser","sessionStorage","user","JSON","parse","setCurrentUser","data","console","log","setItem","stringify","setUnverifiedUser","getUnverifiedUser","unverifiedUser","setTokens","idToken","jwtToken","accessToken","refreshToken","token","getCurrentPage","page","setCurrentPage","clearSession","field","removeItem","httpLink","HttpLink","uri","authLink","setContext","_","a","headers","authorization","accessAuthorization","client","ApolloClient","cache","InMemoryCache","typePolicies","Query","fields","IncomingFriendRequests","merge","getOutgoingFriendRequest","getFriendsFriends","link","concat","CognitoClient","userPoolParams","UserPoolId","ClientId","endpoint","userPool","CognitoUserPool","this","poolSignUp","promisify","signUp","bind","username","password","attributes","attributeList","attribute","push","CognitoUserAttribute","code","poolUser","CognitoUser","Username","Pool","poolConfirmRegistration","confirmRegistration","authDetails","AuthenticationDetails","Password","poolAuthenticateUser","authenticateUser","authenticate","resolve","reject","onSuccess","onFailure","Promise","oldPassword","newPassword","poolChangePassword","changePassword","poolUpdateUserAttributes","updateAttributes","currentUser","getSession","getUserAttributes","poolResendConfirmationCode","resendConfirmationCode","signOut","configVars","dev","aws_cognito_identity_pool_id","aws_user_pools_id","aws_user_pools_web_client_id","aws_appsync_graphqlEndpoint","aws_dynamodb_table_schemas_tableName","aws_user_files_s3_bucket","prod","awsConfig","LIST_ORDERS_BY_RESTAURANT","gql","GET_RESTAURANT_BY_OWNER","getVendorRewards","PortalDashboard","props","className","src","dashboardDesign","useInterval","callback","delay","savedCallback","useRef","useEffect","current","id","setInterval","clearInterval","UPDATE_ORDER_ETA","createVendorReward","updateVendorReward","deleteVendorReward","updateRestaurant","dayjs","format","PartyContainer","partyOrders","selectedOrder","setSelectedOrder","useState","expanded","setExpanded","orders","restaurantFinishedPreparingTimeWindow","undefined","onClick","e","preventDefault","partyViewed","alt","width","height","delivererName","map","order","style","fontWeight","stopPropagation","handleSelectOrder","customer","name","PortalOrders","restaurant","audio","Audio","ding","useQuery","customQueries","variables","restaurantId","skip","pollInterval","ordersData","ordersLoading","loading","error","useMutation","customMutations","onCompleted","updateOrderETA","ordersByParty","hasUnviewed","listOrdersByRestaurant","party","deliverer","Object","entries","key","value","play","loadingBubbleIcon","keys","length","orderSentTime","items","item","foodOptions","foodOption","options","option","price","toFixed","tax","tip","totalPrice","restaurantFinishedPreparingMinutes","orderTime","index","partyId","orderId","orderFinishedPreparingMinutes","bubbleIcon","PortalTermsService","type","RadioButton","currentChoice","setChoice","PortalMenu","defaultMenuItem","description","restaurantSk","vendor","getVendor","sk","slice","lastIndexOf","categoryNameInput","itemNameInput","itemPriceInput","itemDescriptionInput","setLoading","mode","changeMode","toppingPopup","setToppingPopup","addItemType","setAddItemType","selectedTopping","setSelectedTopping","lastSelectedTopping","setLastSelectedTopping","selectedMenuItem","setSelectedMenuItem","setSelectedMenuItemToppings","setSelectedMenuItemOptions","setSelectedMenuItemExistingToppings","selectedCategory","setSelectedCategory","setHasMenu","toppingOptions","setToppingOptions","setToppingCategories","menuItems","setMenuItems","menuCategoriesList","setMenuCategoriesList","toppings","setToppings","toppingCategoryName","setToppingCategoryName","getData","categories","menu","Array","from","forEach","category","oldMenuItems","toggleToppingPopup","addCategory","categoryClone","__typename","categoryListClone","selectedCategoryIndex","findIndex","itemsInput","parseFloat","updatedRestaurant","input","updateRestaurantResponse","arrayToppings","numChoices","selectedItemIndex","__typeName","points","filter","placeholder","ref","defaultValue","onChange","event","target","selected","disabled","hidden","topping","xButtonIcon","toppingClone","editOption","toppingCopy","opt","deleteOption","itemClone","plusButtonIcon","join","categoryName","find","prepareEdit","PortalRewards","defaultReward","nameInput","pointsInput","descriptionInput","selectedRewardItem","selectRewardItem","Rewards","rewardItems","setRewardItems","API","graphql","graphqlOperation","menuId","response","rewards","sort","reward1","reward2","reward","itemName","parseInt","date_active_from","date_active_to","discountAmount","discountPercentage","newReward","PortalSettings","defaultVendor","tags","address","city","state","zip_code","contact","restaurantOwnerName","phoneNumber","email","hours","Sunday","sundayHours","split","Monday","mondayHours","Tuesday","tuesdayHours","Wednesday","wednesdayHours","Thursday","thursdayHours","Friday","fridayHours","Saturday","saturdayHours","addressInput","phoneNumberInput","contactInput","emailInput","startTime","startPeriod","endTime","endPeriod","vendorForm","setVendorForm","changeVendorHours","day","dayHalf","timePlace","vendorFormHours","currentHours","substr","changeVendorHoursPeriod","periodType","period","zipCode","replaceAll","charAt","readOnly","maxLength","updateVendor","tag","locationIcon","phoneIcon","clockIcon","Amplify","configure","Portal","Cognito","window","location","href","indexOf","portalSelection","setPortalSelection","loggedIn","setLoggedIn","sideBar","toggleShowHeader","vendorData","vendorError","vendorLoading","getRestaurantByOwner","to","logo","ordersIcon","termsServiceIcon","menuIcon","rewardsIcon","settingsIcon","logoutIcon","path","component","PortalSignUp","passwordInput","codeInput","errorMsg","setErrorMsg","successMsg","setSuccessMsg","signedUp","setSignedUp","confirmed","setConfirmed","userName","setUserName","Name","Value","message","userSub","login","result","getCurrentUserAttributes","userWithSub","cognitoId","setUser","onSubmit","htmlFor","App","showHeader","ApolloProvider","exact","render","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.3bae3100.chunk.js","sourcesContent":["function getCurrentUser() {\n  if (typeof sessionStorage.user === \"undefined\") {\n    return null;\n  }\n  return JSON.parse(sessionStorage.user);\n}\n\nfunction setCurrentUser(data) {\n  console.log(data);\n  sessionStorage.setItem(\"user\", JSON.stringify(data));\n}\n\nfunction setUnverifiedUser(data) {\n  console.log(data);\n  sessionStorage.setItem(\"unverifiedUser\", JSON.stringify(data));\n}\n\nfunction getUnverifiedUser() {\n  if (typeof sessionStorage.unverifiedUser === \"undefined\") {\n    return null;\n  }\n  return JSON.parse(sessionStorage.unverifiedUser);\n}\n\nfunction setTokens(data) {\n  sessionStorage.setItem('idToken', data.idToken.jwtToken);\n  sessionStorage.setItem('accessToken', data.accessToken.jwtToken);\n  sessionStorage.setItem('refreshToken', data.refreshToken.token);\n}\n\nfunction getIdToken() {\n  return sessionStorage.idToken;\n}\n\nfunction getAccessToken() {\n  return sessionStorage.accessToken;\n}\n\nfunction getCurrentPage() { \n  if (typeof sessionStorage.page === \"undefined\") {\n    return null;\n  }\n  return sessionStorage.page;\n}\n\nfunction setCurrentPage(data) {\n  sessionStorage.setItem(\"page\", data);\n}\n\nfunction clearSession(field) {\n  sessionStorage.removeItem(field);\n}\n\nexport { getCurrentUser, setCurrentUser, getCurrentPage, setUnverifiedUser, getUnverifiedUser, setTokens, getIdToken, getAccessToken, setCurrentPage, clearSession };","\nimport { ApolloClient, HttpLink, InMemoryCache } from '@apollo/client';\nimport { setContext } from '@apollo/client/link/context';\nimport { getIdToken, getAccessToken } from './utils/session';\n\nconst apolloLocal = 'http://localhost:4000/graphql';\nconst apolloProd = 'https://api.toppingsapp.com/graphql';\n\nconst httpLink = new HttpLink({\n  uri: !process.env.NODE_ENV || process.env.NODE_ENV === 'development' ? apolloLocal : apolloProd,\n});\n\nconst authLink = setContext(async (_, { headers }) => {\n  // get the authentication token from local storage if it exists\n  const token = getIdToken();\n  const accessToken = getAccessToken();\n\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      authorization: token ? `${token}` : '',\n      accessAuthorization: accessToken ? `${accessToken}` : '',\n    },\n  };\n});\n\nconst client = new ApolloClient({\n  cache: new InMemoryCache({\n    typePolicies: {\n      Query: {\n        fields: {\n          IncomingFriendRequests: {\n            merge: false,\n          },\n          getOutgoingFriendRequest: {\n            merge: false,\n          },\n          getFriendsFriends: {\n            merge: false,\n          },\n        },\n      },\n    },\n  }),\n  link: authLink.concat(httpLink),\n});\n\nexport default client;","import { CognitoUserPool, CognitoUserAttribute, CognitoUser, AuthenticationDetails } from 'amazon-cognito-identity-js';\nimport { promisify } from 'util';\n\nclass CognitoClient {\n  constructor() {\n    let userPoolParams;\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n      userPoolParams = {\n        UserPoolId: 'local_08k2xaAy',\n        ClientId: 'd0fw03t1cu3pq3726kyyg4mn5',\n        endpoint: 'http://localhost:9229/',\n      };\n    } else {\n      userPoolParams = {\n        UserPoolId: 'us-east-1_BZrR4rdM5',\n        ClientId: '68aj8nbksgd001o2bd00gds65r',\n        endpoint: 'https://cognito-idp.us-east-1.amazonaws.com/us-east-1_BZrR4rdM5',\n      };\n    }\n    const userPool = new CognitoUserPool(userPoolParams);\n\n    this.userPool = userPool;\n    this.poolSignUp = promisify(userPool.signUp).bind(userPool);\n    // this.poolResendConfirmationCode = promisify(userPool.resendConfirmationCode).bind(userPool);\n    // this.poolAuthenticateUser = promisify(userPool.authenticateUser).bind(userPool);\n  }\n\n  userPool;\n  poolUser;\n  poolSignUp;\n  poolConfirmRegistration;\n  poolResendConfirmationCode;\n  poolAuthenticateUser;\n  poolChangePassword;\n  poolupdateUserAttributess;\n  poolGetCurrentUser;\n  poolSignOut;\n\n  async signUp(username, password, attributes) {\n    let attributeList = [];\n\n    for (const attribute of attributes) {\n      attributeList.push(new CognitoUserAttribute(attribute));\n    }\n\n    return this.poolSignUp(username, password, attributeList, null);\n  }\n\n  async confirmRegistration(username, code) {\n    if (!this.poolUser) {\n      const user = new CognitoUser({\n        Username: username,\n        Pool: this.userPool,\n      });\n\n      this.poolUser = user;\n    }\n\n    if (!this.poolConfirmRegistration) {\n      this.poolConfirmRegistration = promisify(this.poolUser.confirmRegistration).bind(this.poolUser);\n    }\n\n    return this.poolConfirmRegistration(code, true);\n  }\n\n  async authenticateUser(username, password) {\n    if (!this.poolUser) {\n      const user = new CognitoUser({\n        Username: username,\n        Pool: this.userPool,\n      });\n\n      this.poolUser = user;\n    }\n\n    if (!process.env.NODE_ENV || process.env.NODE_ENV === 'development') {\n      this.poolUser.setAuthenticationFlowType('USER_PASSWORD_AUTH');\n    }\n\n    const authDetails = new AuthenticationDetails({\n      Username: username,\n      Password: password,\n    });\n\n    if (!this.poolAuthenticateUser) {\n      this.poolAuthenticateUser = promisify(this.poolUser.authenticateUser).bind(this.poolUser);\n    }\n\n    const authenticate = async (resolve, reject) =>\n      await this.poolAuthenticateUser(authDetails, {\n        onSuccess: resolve,\n        onFailure: reject,\n      });\n\n    return new Promise(function (resolve, reject) {\n      authenticate(resolve, reject);\n    });\n  }\n\n  async changePassword(oldPassword, newPassword) {\n    if (!this.poolChangePassword) {\n      this.poolChangePassword = promisify(this.poolUser.changePassword.bind(this.poolUser));\n    }\n\n    return this.poolChangePassword(oldPassword, newPassword);\n  }\n\n  async updateUserAttributes(attributes) {\n    console.log(this.poolUser);\n    if (!this.poolUpdateUserAttributes) {\n      this.poolUpdateUserAttributes = promisify(this.poolUser.updateAttributes.bind(this.poolUser));\n    }\n\n    let attributeList = [];\n\n    for (const attribute of attributes) {\n      attributeList.push(new CognitoUserAttribute(attribute));\n    }\n\n    return this.poolUpdateUserAttributes(attributeList);\n  }\n\n  async getCurrentUser() {\n    // const syncStorage = promisify(this.userPool.storage.sync.bind(this.userPool));\n    // const syncRes = await syncStorage();\n\n    // if (syncRes !== 'SUCCESS') return;\n\n    const currentUser = this.userPool.getCurrentUser();\n\n    console.log('SGOSI', currentUser);\n    this.poolUser = new CognitoUser({\n      Username: currentUser.username,\n      Pool: this.userPool,\n    });\n\n    const getSession = promisify(this.poolUser.getSession.bind(this.poolUser));\n    const session = await getSession();\n\n    return this.poolUser;\n  }\n\n  async getCurrentUserAttributes() {\n    // console.log('', this.userPool.storage.sync);\n    // const syncStorage = promisify(this.userPool.storage.sync.bind(this.userPool));\n    // const syncRes = await syncStorage();\n\n    // if (syncRes !== 'SUCCESS') return;\n\n    const currentUser = this.userPool.getCurrentUser();\n\n    this.poolUser = new CognitoUser({\n      Username: currentUser.username,\n      Pool: this.userPool,\n    });\n\n    const getSession = promisify(this.poolUser.getSession.bind(this.poolUser));\n    const session = await getSession();\n\n    const getUserAttributes = promisify(this.poolUser.getUserAttributes.bind(this.poolUser));\n    const attributes = await getUserAttributes();\n    console.log(attributes);\n    return attributes;\n  }\n\n  async resendConfirmationCode() {\n    await this.getCurrentUser();\n\n    if (!this.poolResendConfirmationCode) {\n      this.poolResendConfirmationCode = promisify(this.poolUser.resendConfirmationCode.bind(this.poolUser));\n    }\n\n    await this.poolResendConfirmationCode();\n  }\n\n  async signOut() {\n    await this.getCurrentUser();\n\n    this.poolUser.signOut();\n  }\n}\n\nexport default CognitoClient;\n","export default __webpack_public_path__ + \"static/media/logo-white.f74b3cfc.png\";","const stage = \"prod\";\n\nconst configVars = {\n    dev: {\n        aws_cognito_identity_pool_id: \"us-east-1:774d9e9a-94b1-4380-ad62-a5f56c5f0f77\",\n        aws_user_pools_id: \"us-east-1_mqU4wOr3S\",\n        aws_user_pools_web_client_id: \"75e3mq3pape88oe3bbi2bb0fc6\",\n        aws_appsync_graphqlEndpoint: \"https://j2lz5urxhnej7hy4s6xrrirdoq.appsync-api.us-east-1.amazonaws.com/graphql\",\n        aws_dynamodb_table_schemas_tableName: \"userdb-dev\",\n        aws_user_files_s3_bucket: \"images122034-dev\",\n    },\n    prod: {\n        aws_cognito_identity_pool_id: \"us-east-1:d28b4525-5715-4996-8b46-20d2c6bbd0a4\",\n        aws_user_pools_id: \"us-east-1_YgvAk1566\",\n        aws_user_pools_web_client_id: \"5n7lj78gnd8ocj4eu45v4eqjvj\",\n        aws_appsync_graphqlEndpoint: \"https://mik3xstqlreaxo22eswh3jdlia.appsync-api.us-east-1.amazonaws.com/graphql\",\n        aws_dynamodb_table_schemas_tableName: \"userdb-prod\",\n        aws_user_files_s3_bucket: \"images153411-prod\",\n    }\n};\n\nconst awsConfig = {\n    \"aws_project_region\": \"us-east-1\",\n    \"aws_cognito_region\": \"us-east-1\",\n    \"oauth\": {},\n    \"aws_appsync_region\": \"us-east-1\",\n    \"aws_appsync_authenticationType\": \"AMAZON_COGNITO_USER_POOLS\",\n    \"aws_dynamodb_all_tables_region\": \"us-east-1\",\n    \"aws_dynamodb_table_schemas\": [\n        {\n            \"tableName\": configVars[stage].aws_dynamodb_table_schemas_tableName,\n            \"region\": \"us-east-1\"\n        }\n    ],\n    \"aws_user_files_s3_bucket_region\": \"us-east-1\",\n    ...configVars[stage]\n};\n\nexport default awsConfig;","import { gql } from '@apollo/client';\n\nexport const LIST_ORDERS_BY_RESTAURANT = gql`\n  query ListOrdersByRestaurant($restaurantId: String!) {\n    listOrdersByRestaurant(restaurantId: $restaurantId) {\n      id\n      party {\n        id\n        estimatedDeliveryTimeWindow {\n          begin\n          end\n        }\n        restaurantFinishedPreparingTimeWindow {\n          begin\n          end\n        }\n      }\n      items {\n        name\n        price\n        points\n        boughtWithPoints\n        isReward\n        description\n        comment\n        quantity\n        foodOptions {\n          name\n          options {\n            name\n          }\n        }\n      }\n      customer {\n        id\n        pfp\n        name\n        phoneNumber\n        username\n      }\n      deliverer {\n        id\n        pfp\n        name\n        phoneNumber\n        username\n      }\n      restaurant {\n        id\n        name\n      }\n      estimatedDeliveryTimeWindow {\n        begin\n        end\n      }\n      restaurantFinishedPreparingTimeWindow {\n        begin\n        end\n      }\n      restaurantFinishedPreparingMinutes\n      priceBeforeDiscount\n      priceAfterDiscount\n      discount\n      tax\n      tip\n      totalPrice\n      isPaid\n      status\n      comment\n      orderSentTime\n    }\n  }\n`;\n\nexport const GET_RESTAURANT_BY_OWNER = gql`\n  query GetRestaurantByOwner {\n    getRestaurantByOwner {\n      id\n      name\n      description\n      address\n      city\n      state\n      phoneNumber\n      emoji\n      hours {\n        open\n        close\n      }\n      thumbnail\n      menu {\n        name\n        menuItems {\n          name\n          description\n          price\n          points\n          numOrders\n          image\n          foodOptions {\n            name\n            numChoices\n            options {\n              name\n              price\n              points\n            }\n          }\n        }\n      }\n      rewardItems {\n        name\n        description\n        price\n        points\n        numOrders\n        foodOptions {\n          name\n          numChoices\n          options {\n            name\n            price\n            points\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const getMenu = /* GraphQL */ `\n  query GetMenu($id: ID!) {\n    getMenu(id: $id) {\n      description\n      id\n      name\n      address\n      sundayHours\n      mondayHours\n      tuesdayHours\n      wednesdayHours\n      thursdayHours\n      fridayHours\n      saturdayHours\n      images {\n        items {\n          id\n          menuId\n          type\n          url\n        }\n      }\n      menuCategories {\n        items {\n          id\n          name\n          menuId\n          menuItems {\n            items {\n              id\n              name\n              menuCategoryName\n              description\n              price\n              options {\n                items {\n                  id\n                  foodOptionName\n                  menuItemName\n                  numchoices\n                  optionCat {\n                    name\n                    options {\n                      items {\n                        id\n                        optionName\n                        foodOptionName\n                        option {\n                          name\n                          price\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const listActiveOrdersByCustomer = /* GraphQL */ `\n  query ListActiveOrdersByCustomer($customerId: String!) {\n    listActiveOrdersByCustomer(customerId: $customerId) {\n      id\n      status\n      pickupId\n      pickup {\n        id\n        delivererId\n        deliverer\n      }\n      restaurant {\n        id\n        name\n        images {\n          items {\n            url\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const listOpenPickups = /* GraphQL */ `\n  query ListOpenPickups($userId: String!) {\n    listOpenPickups(userId: $userId) {\n      id\n      delivererId\n      deliverer\n      windowEndTime\n      menuId\n      restaurant {\n        id\n        name\n        images {\n          items {\n            url\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const getOrder = /* GraphQL */ `\n  query GetOrder($id: ID!) {\n    getOrderInfo(id: $id) {\n      actual_delivery_time\n      charge_id\n      closed\n      comment\n      createdAt\n      customerId\n      delivery_address\n      delivery_lat\n      delivery_long\n      discount\n      estimated_delivery_time\n      fees\n      food_ready_time\n      grandTotal\n      id\n      isPaid\n      order_price_after_discount\n      order_price_before_discount\n      pickupId\n      status\n      tax\n      tip\n      restaurant {\n        address\n        city\n        description\n        userId\n        fridayHours\n        id\n        isOpen\n        lat\n        long\n        mondayHours\n        name\n        phoneNumber\n        restaurantOwnerName\n        saturdayHours\n        state\n        sundayHours\n        thursdayHours\n        tuesdayHours\n        wednesdayHours\n        zip_code\n        images {\n          items {\n            id\n            menuId\n            type\n            url\n          }\n        }\n      }\n      pickup {\n        apiResponse\n        closed\n        delivererId\n        deliverer\n        expdate\n        id\n        isPickedUp\n        lat\n        long\n        menuId\n        status\n        transportation_type\n        windowClosed\n        windowEndTime\n      }\n      customer\n      orderItems {\n        items {\n          comment\n          foodOptionsArray\n          id\n          itemName\n          menuId\n          orderId\n          price_after_reward\n          price_before_reward\n          price_per_item\n          quantity\n        }\n      }\n    }\n  }\n`;\n\nexport const getReward = /* GraphQL */ `\n  query GetReward($menuId: ID!, $userId: String!) {\n    getRewardInfo(menuId: $menuId, userId: $userId) {\n      id\n      menuId\n      points\n      userId\n    }\n  }\n`;\n\nexport const getVendorRewards = /* GraphQL */ `\n  query GetVendorRewards($menuId: ID!) {\n    getVendorRewards(menuId: $menuId) {\n      date_active_from\n      date_active_to\n      description\n      discountAmount\n      discountPercentage\n      id\n      itemName\n      menuId\n      points\n    }\n  }\n`;\n\nexport const listRestaurantsInfo = /* GraphQL */ `\n  query ListRestaurants {\n    listRestaurantsInfo {\n      address\n      city\n      description\n      userId\n      fridayHours\n      id\n      isOpen\n      lat\n      long\n      mondayHours\n      name\n      phoneNumber\n      restaurantOwnerName\n      saturdayHours\n      state\n      sundayHours\n      thursdayHours\n      tuesdayHours\n      wednesdayHours\n      zip_code\n      images {\n        items {\n          url\n        }\n      }\n    }\n  }\n`;\n\nexport const getPickup = /* GraphQL */ `\n  query GetPickup($delivererId: String!) {\n    getPickupInfo(delivererId: $delivererId) {\n      closed\n      createdAt\n      delivererId\n      id\n      isPickedUp\n      lat\n      long\n      menuId\n      status\n      transportation_type\n      windowClosed\n      windowEndTime\n      deliverer\n      usersOpenTo\n      orders {\n        items {\n          actual_delivery_time\n          comment\n          closed\n          customerId\n          delivery_address\n          delivery_lat\n          delivery_long\n          estimated_delivery_time\n          food_ready_time\n          grandTotal\n          id\n          status\n          tax\n          tip\n          order_price_before_discount\n          order_price_after_discount\n          discount\n          customer\n          comment\n          orderItems {\n            items {\n              comment\n              foodOptionsArray\n              id\n              itemName\n              price_after_reward\n              price_before_reward\n              price_per_item\n              quantity\n            }\n          }\n        }\n      }\n      restaurant {\n        address\n        city\n        description\n        userId\n        fridayHours\n        id\n        isOpen\n        lat\n        long\n        mondayHours\n        name\n        phoneNumber\n        restaurantOwnerName\n        saturdayHours\n        state\n        sundayHours\n        thursdayHours\n        tuesdayHours\n        wednesdayHours\n        zip_code\n        images {\n          items {\n            url\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const getUserInfo = /* GraphQL */ `\n  query GetUserInfo($userId: String!) {\n    getUserInfo(userId: $userId) {\n      pk\n      sk\n      name\n      phoneNumber\n      pfp\n      referralCode\n      referredUsers {\n        pk\n        sk\n        name\n        phoneNumber\n        pfp\n      }\n    }\n  }\n`;\n\nexport const getPickupPublicInfo = /* GraphQL */ `\n  query GetPickupPublicInfo($id: ID!) {\n    getPickupPublicInfo(id: $id) {\n      id\n      delivererId\n      closed\n    }\n  }\n`;\n\nexport const listOrdersByRestaurant = /* GraphQL */ `\n  query ListOrdersByRestaurant($restaurantId: ID!) {\n    listOrdersByRestaurant(restaurantId: $restaurantId) {\n      actual_delivery_time\n      closed\n      comment\n      createdAt\n      customerId\n      delivery_address\n      delivery_lat\n      delivery_long\n      discount\n      estimated_delivery_time\n      fees\n      food_ready_time\n      grandTotal\n      id\n      isPaid\n      order_price_after_discount\n      order_price_before_discount\n      pickupId\n      status\n      tax\n      tip\n      updatedAt\n      customer\n      orderItems {\n        items {\n          comment\n          createdAt\n          foodOptionsArray\n          itemName\n          id\n          menuId\n          orderId\n          price_after_reward\n          price_before_reward\n          price_per_item\n          quantity\n          updatedAt\n        }\n      }\n      pickup {\n        apiResponse\n        closed\n        createdAt\n        delivererId\n        expdate\n        id\n        isPickedUp\n        lat\n        long\n        menuId\n        status\n        transportation_type\n        updatedAt\n        windowClosed\n        windowEndTime\n        deliverer\n      }\n      restaurant\n    }\n  }\n`;\n\nexport const getRestaurantByOwner = /* GraphQL */ `\n  query GetRestaurantByOwner($userId: String!) {\n    getRestaurantByOwner(userId: $userId) {\n      address\n      city\n      createdAt\n      description\n      userId\n      fridayHours\n      id\n      isOpen\n      lat\n      long\n      mondayHours\n      name\n      phoneNumber\n      restaurantOwnerName\n      saturdayHours\n      state\n      sundayHours\n      thursdayHours\n      tuesdayHours\n      updatedAt\n      wednesdayHours\n      zip_code\n    }\n  }\n`;\n\nexport const getFeed = /* GraphQL */ gql`\n  query GetFeed {\n    getFeed {\n      pk\n      sk\n      createdAt\n      content {\n        ordererName\n        delivererName\n        delivererPfp\n        restaurantName\n        restaurantImage\n      }\n      reactions {\n        reactionType\n        userId\n        name\n      }\n      numComments\n    }\n  }\n`;\n\nexport const listUsers = /* GraphQL */ `\n  query ListUsers {\n    listUsers {\n      pk\n      sk\n      name\n      phoneNumber\n      pfp\n      cognitoId\n    }\n  }\n`;\n\nexport const getIncomingFriendRequests = /* GraphQL */ gql`\n  query GetIncomingFriendRequests {\n    getIncomingFriendRequests {\n      pk\n      sk\n      status\n      user {\n        pk\n        sk\n        phoneNumber\n        name\n        pfp\n        cognitoId\n      }\n    }\n  }\n`;\n\nexport const getFriendsFriends = /* GraphQL */ gql`\n  query GetFriendsFriends {\n    getFriendsFriends {\n      pk\n      sk\n      name\n      cognitoId\n      phoneNumber\n      pfp\n    }\n  }\n`;\n\nexport const getOutgoingFriendRequests = /* GraphQL */ gql`\n  query GetOutgoingFriendRequests {\n    getOutgoingFriendRequests {\n      pk\n      sk\n      status\n      user {\n        pk\n        sk\n        phoneNumber\n        name\n        pfp\n        cognitoId\n      }\n    }\n  }\n`;\n\nexport const getFriends = /* GraphQL */ gql`\n  query GetFriends {\n    getFriends {\n      pk\n      sk\n      friends {\n        pk\n        sk\n        phoneNumber\n        name\n        pfp\n        cognitoId\n      }\n    }\n  }\n`;\n\nexport const listRestaurants = gql`\n  query ListRestaurants {\n    listRestaurants {\n      pk\n      sk\n      name\n      description\n      address\n      lat\n      long\n      phoneNumber\n      ownerId\n      ownerName\n      hours\n      thumbnail\n    }\n  }\n`;\n\nexport const getRestaurant = gql`\n  query GetRestaurant($restaurantId: String!) {\n    getRestaurant(restaurantId: $restaurantId) {\n      pk\n      sk\n      name\n      description\n      address\n      lat\n      long\n      phoneNumber\n      ownerId\n      ownerName\n      hours\n      thumbnail\n      menu {\n        name\n        menuItems {\n          name\n          description\n          price\n          points\n          foodOptions {\n            name\n            numChoices\n            options {\n              name\n              price\n              points\n            }\n          }\n        }\n      }\n      rewardItems {\n        name\n        description\n        price\n        points\n        foodOptions {\n          name\n          numChoices\n          options {\n            name\n            price\n            points\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const getVendor = gql`\n  query GetVendor {\n    getVendor {\n      pk\n      sk\n      cognitoId\n      name\n      email\n      phoneNumber\n      restaurant {\n        pk\n        sk\n        name\n        description\n        address\n        lat\n        long\n        phoneNumber\n        ownerId\n        ownerName\n        hours\n        thumbnail\n        menu {\n          name\n          menuItems {\n            name\n            description\n            price\n            points\n            foodOptions {\n              name\n              numChoices\n              options {\n                name\n                price\n                points\n              }\n            }\n          }\n        }\n        rewardItems {\n          name\n          description\n          price\n          points\n          foodOptions {\n            name\n            numChoices\n            options {\n              name\n              price\n              points\n            }\n          }\n        }\n      }\n    }\n  }\n`;","export default __webpack_public_path__ + \"static/media/dashboard-design.b466fc61.PNG\";","import React, { useState, useEffect, useRef } from 'react';\n\nimport dashboardDesign from '../assets/images/dashboard-design.PNG';\n\nfunction PortalDashboard(props) {\n  return (\n    <article className=\"portal-dashboard-container\">\n      <img src={dashboardDesign} />\n    </article>\n  );\n}\n\nexport default PortalDashboard;\n","import React, { useState, useEffect, useRef } from 'react';\nconst useInterval = (callback, delay) => {\n  const savedCallback = useRef();\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback;\n}, [callback]);\n// Set up the interval.\nuseEffect(() => {\n  function tick() {\n    savedCallback.current();\n  }\n  if (delay !== null) {\n    let id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }\n}, [delay]);\n}\nexport default useInterval;","import { gql } from '@apollo/client';\n\nexport const UPDATE_ORDER_ETA = gql`\n  mutation UpdateOrderETA($orderId: String!, $partyId: String!, $orderFinishedPreparingMinutes: Int!) {\n    updateOrderETA(orderId: $orderId, partyId: $partyId, orderFinishedPreparingMinutes: $orderFinishedPreparingMinutes) {\n      id\n      party {\n        id\n        estimatedDeliveryTimeWindow {\n          begin\n          end\n        }\n        restaurantFinishedPreparingTimeWindow {\n          begin\n          end\n        } \n      }\n      estimatedDeliveryTimeWindow {\n        begin\n        end\n      }\n      restaurantFinishedPreparingTimeWindow {\n        begin\n        end\n      }\n      restaurantFinishedPreparingMinutes\n    }\n  }\n`;\n\nexport const updateDriverLocation = /* GraphQL */ `\n  mutation UpdateDriverLocation($id: ID!, $lat: Float!, $long: Float!) {\n    updateDriverLocation(id: $id, lat: $lat, long: $long) {\n      id\n      lat\n      long\n      apiResponse\n      orders {\n        items {\n          id\n          closed\n          customerId\n          delivery_lat\n          delivery_long\n          pickupId\n          status\n          delivery_address\n          customer\n          restaurant {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const updateEta = /* GraphQL */ `\n  mutation UpdateEta($id: ID!, $estimated_delivery_time: AWSTimestamp!) {\n    updateEta(estimated_delivery_time: $estimated_delivery_time, id: $id) {\n      id\n      estimated_delivery_time\n    }\n  }\n`;\n\nexport const createPickup = /* GraphQL */ `\n  mutation CreatePickup(\n    $cart: AWSJSON!\n    $currency: String!\n    $delivererId: String!\n    $description: String!\n    $menuId: ID!\n    $rewardsCart: AWSJSON!\n    $stripeToken: String!\n    $windowOpenTime: Int!\n    $usersOpenTo: AWSJSON\n    $isPublic: Boolean!\n  ) {\n    createNewPickup(\n      cart: $cart\n      currency: $currency\n      delivererId: $delivererId\n      description: $description\n      menuId: $menuId\n      rewardsCart: $rewardsCart\n      stripeToken: $stripeToken\n      windowOpenTime: $windowOpenTime\n      isPublic: $isPublic\n      usersOpenTo: $usersOpenTo\n    ) {\n      id\n      delivererId\n      transportation_type\n      menuId\n      closed\n      windowEndTime\n      windowClosed\n      isPickedUp\n      status\n      deliverer\n      orders {\n        items {\n          isPaid\n          charge_id\n          id\n          closed\n          pickupId\n          customerId\n          customer\n          orderItems {\n            items {\n              id\n              itemName\n              menuId\n              orderId\n              quantity\n              price_per_item\n              price_before_reward\n              foodOptionsArray\n            }\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const createOrder = /* GraphQL */ `\n  mutation CreateOrder(\n    $cart: AWSJSON!\n    $currency: String!\n    $customerId: String!\n    $comment: String!\n    $delivery_address: String!\n    $delivery_lat: Float!\n    $delivery_long: Float!\n    $description: String!\n    $orderRestaurantId: ID!\n    $pickupId: ID!\n    $rewardsCart: AWSJSON!\n    $stripeToken: String!\n  ) {\n    createNewOrder(\n      cart: $cart\n      currency: $currency\n      customerId: $customerId\n      comment: $comment\n      delivery_address: $delivery_address\n      delivery_lat: $delivery_lat\n      delivery_long: $delivery_long\n      description: $description\n      orderRestaurantId: $orderRestaurantId\n      pickupId: $pickupId\n      rewardsCart: $rewardsCart\n      stripeToken: $stripeToken\n    ) {\n      id\n      isPaid\n      closed\n      pickupId\n      delivery_address\n      delivery_lat\n      delivery_long\n      customerId\n      status\n      charge_id\n      comment\n      orderItems {\n        items {\n          itemName\n          menuId\n          orderId\n          quantity\n          price_per_item\n          price_before_reward\n          foodOptionsArray\n        }\n      }\n      pickup {\n        id\n        delivererId\n        transportation_type\n        menuId\n        closed\n        windowEndTime\n        windowClosed\n        isPickedUp\n        status\n        deliverer\n      }\n      customer\n    }\n  }\n`;\n\nexport const closeOrder = /* GraphQL */ `\n  mutation CloseOrder($id: ID!) {\n    closeOrder(id: $id) {\n      id\n      actual_delivery_time\n      charge_id\n      closed\n      comment\n      customerId\n      delivery_address\n      delivery_lat\n      delivery_long\n      discount\n      estimated_delivery_time\n      fees\n      food_ready_time\n      grandTotal\n      isPaid\n      order_price_after_discount\n      order_price_before_discount\n      pickupId\n      status\n      tax\n      tip\n      restaurant {\n        name\n      }\n    }\n  }\n`;\n\nexport const acceptOrder = /* GraphQL */ `\n  mutation AcceptOrder($id: ID!) {\n    acceptOrder(id: $id) {\n      actual_delivery_time\n      closed\n      comment\n      customerId\n      delivery_address\n      delivery_lat\n      delivery_long\n      discount\n      estimated_delivery_time\n      fees\n      food_ready_time\n      grandTotal\n      id\n      isPaid\n      order_price_after_discount\n      order_price_before_discount\n      pickupId\n      status\n      tax\n      tip\n    }\n  }\n`;\n\nexport const declineOrder = /* GraphQL */ `\n  mutation DeclineOrder($id: ID!) {\n    declineOrder(id: $id) {\n      actual_delivery_time\n      closed\n      comment\n      customerId\n      delivery_address\n      delivery_lat\n      delivery_long\n      discount\n      estimated_delivery_time\n      fees\n      food_ready_time\n      grandTotal\n      id\n      isPaid\n      order_price_after_discount\n      order_price_before_discount\n      pickupId\n      status\n      tax\n      tip\n    }\n  }\n`;\n\nexport const markPickupPickedUp = /* GraphQL */ `\n  mutation MarkPickupPickedUp($id: ID!) {\n    markPickupPickedUp(id: $id) {\n      apiResponse\n      closed\n      delivererId\n      expdate\n      id\n      isPickedUp\n      lat\n      long\n      menuId\n      status\n      transportation_type\n      windowClosed\n      windowEndTime\n    }\n  }\n`;\n\nexport const markOrderDelivered = /* GraphQL */ `\n  mutation MarkOrderDelivered($id: ID!) {\n    markOrderDelivered(id: $id) {\n      actual_delivery_time\n      closed\n      comment\n      customerId\n      delivery_address\n      delivery_lat\n      delivery_long\n      discount\n      estimated_delivery_time\n      fees\n      food_ready_time\n      grandTotal\n      id\n      isPaid\n      order_price_after_discount\n      order_price_before_discount\n      pickupId\n      status\n      tax\n      tip\n      customer\n      orderItems {\n        items {\n          comment\n          foodOptionsArray\n          id\n          itemName\n          price_after_reward\n          price_before_reward\n          price_per_item\n          quantity\n        }\n      }\n      pickup {\n        id\n        closed\n      }\n    }\n  }\n`;\n\nexport const cancelOrder = /* GraphQL */ `\n  mutation CancelOrder($id: ID!) {\n    cancelOrder(id: $id) {\n      actual_delivery_time\n      closed\n      comment\n      customerId\n      delivery_address\n      delivery_lat\n      delivery_long\n      discount\n      estimated_delivery_time\n      fees\n      food_ready_time\n      grandTotal\n      id\n      isPaid\n      order_price_after_discount\n      order_price_before_discount\n      pickupId\n      status\n      tax\n      tip\n    }\n  }\n`;\n\nexport const createReferral = /* GraphQL */ `\n  mutation CreateReferral($referrerUserId: String!) {\n    createReferral(referrerUserId: $referrerUserId) {\n      code\n      referrerUserId\n    }\n  }\n`;\n\nexport const updatePfp = /* GraphQL */ `\n  mutation UpdatePfp($userId: String!, $pfp: String!) {\n    updatePfp(userId: $userId, pfp: $pfp) {\n      pk\n      sk\n      name\n      phoneNumber\n      pfp\n    }\n  }\n`;\n\nexport const updateDeviceToken = /* GraphQL */ `\n  mutation UpdateDeviceToken($userId: String!, $deviceToken: String!) {\n    updateDeviceToken(userId: $userId, deviceToken: $deviceToken) {\n      pk\n      sk\n      name\n      phoneNumber\n    }\n  }\n`;\n\nexport const createFeedback = /* GraphQL */ `\n  mutation CreateFeedback($userId: String!, $feedback: String!) {\n    createFeedback(userId: $userId, feedback: $feedback) {\n      userId\n      feedback\n    }\n  }\n`;\n\nexport const updatePlatform = /* GraphQL */ `\n  mutation UpdateDeviceToken($userId: String!, $platform: String!) {\n    updatePlatform(userId: $userId, platform: $platform) {\n      pk\n      sk\n      name\n      phoneNumber\n    }\n  }\n`;\n\nexport const createRestaurant = /* GraphQL */ `\n  mutation CreateRestaurant(\n    $name: String!\n    $userId: String!\n    $address: String!\n    $city: String!\n    $description: String!\n    $lat: Float!\n    $long: Float!\n    $phoneNumber: AWSPhone!\n    $state: String!\n    $zip_code: String!\n  ) {\n    createRestaurant(\n      name: $name\n      userId: $userId\n      address: $address\n      city: $city\n      description: $description\n      lat: $lat\n      long: $long\n      phoneNumber: $phoneNumber\n      state: $state\n      zip_code: $zip_code\n    ) {\n      id\n      name\n      userId\n      address\n      city\n      description\n      lat\n      long\n      phoneNumber\n      state\n      zip_code\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\nexport const createMenuCategory = /* GraphQL */ `\n  mutation CreateMenuCategory($name: String!, $menuId: ID!) {\n    createMenuCategory(name: $name, menuId: $menuId) {\n      id\n      name\n      menuId\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\nexport const createToppings = /* GraphQL */ `\n  mutation CreateToppings(\n    $id: ID!\n    $selectedMenuItemToppings: AWSJSON!\n    $selectedMenuItemOptions: AWSJSON!\n    $menuItem: AWSJSON!\n    $selectedMenuItemExistingToppings: AWSJSON!\n  ) {\n    createToppings(\n      id: $id\n      selectedMenuItemToppings: $selectedMenuItemToppings\n      selectedMenuItemOptions: $selectedMenuItemOptions\n      menuItem: $menuItem\n      selectedMenuItemExistingToppings: $selectedMenuItemExistingToppings\n    ) {\n      id\n    }\n  }\n`;\n\nexport const createMenuItem = /* GraphQL */ `\n  mutation CreateMenuItem(\n    $menuId: ID!\n    $menuCategoryName: String!\n    $name: String!\n    $description: String!\n    $price: Float!\n  ) {\n    createMenuItem(\n      menuId: $menuId\n      menuCategoryName: $menuCategoryName\n      name: $name\n      description: $description\n      price: $price\n    ) {\n      id\n      menuId\n      menuCategoryName\n      name\n      description\n      price\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\nexport const updateMenuItem = /* GraphQL */ `\n  mutation UpdateMenuItem(\n    $menuId: ID!\n    $id: ID!\n    $menuCategoryName: String!\n    $name: String!\n    $description: String!\n    $price: Float!\n  ) {\n    updateMenuItem(\n      menuId: $menuId\n      id: $id\n      menuCategoryName: $menuCategoryName\n      name: $name\n      description: $description\n      price: $price\n    ) {\n      id\n      menuCategoryName\n      name\n      menuId\n      description\n      price\n      updatedAt\n    }\n  }\n`;\n\nexport const createVendorReward = /* GraphQL */ `\n  mutation CreateVendorReward($menuId: ID!, $itemName: String!, $points: Int!, $date_active_from: AWSDate, $date_active_to: AWSDate, $discountAmount: Float, $discountPercentage: Float, $description: $String!) {\n    createVendorReward(menuId: $menuId, itemName: $itemName, points: $points, date_active_from: $date_active_from, date_active_to: $date_active_to, discountAmount: $discountAmount, discountPercentage: $discountPercentage, description: $description) {\n      id\n      itemName\n      menuId\n      points\n      date_active_from\n      date_active_to\n      discountAmount\n      discountPercentage\n      description\n      createdAt\n      updatedAt\n    }\n  }\n`;\n\nexport const updateVendorReward = /* GraphQL */ `\n  mutation UpdateVendorReward($menuId: ID!, $id: ID!, $itemName: String!, $points: Int!, $description: String!) {\n    updateVendorReward(menuId: $menuId, id: $id, itemName: $itemName, points: $points, description: $description) {\n      id\n      menuId\n      itemName\n      points\n      description\n      updatedAt\n    }\n  }\n`;\n\nexport const deleteVendorReward = /* GraphQL */ `\n  mutation DeleteVendorReward($id: ID!) {\n    deleteVendorReward(id: $id) {\n      id\n    }\n  }\n`;\n\nexport const updateRestaurant = /* GraphQL */ gql`\n  mutation UpdateRestaurant($id: String!, $input: UpdateRestaurantInput!) {\n    updateRestaurant(id: $id, input: $input) {\n      pk\n      sk\n      name\n      description\n      address\n      lat\n      long\n      phoneNumber\n      ownerId\n      ownerName\n      hours\n      thumbnail\n      menu {\n        name\n        menuItems {\n          name\n          description\n          price\n          points\n          foodOptions {\n            name\n            numChoices\n            options {\n              name\n              price\n              points\n            }\n          }\n        }\n      }\n      rewardItems {\n        name\n        description\n        price\n        points\n        foodOptions {\n          name\n          numChoices\n          options {\n            name\n            price\n            points\n          }\n        }\n      }\n    }\n  }\n`;\n\nexport const updateFoodReady = /* GraphQL */ `\n  mutation UpdateFoodReadyTime($id: ID!, $food_ready_time: AWSTimestamp!) {\n    updateFoodReadyTime(id: $id, food_ready_time: $food_ready_time) {\n      id\n      food_ready_time\n    }\n  }\n`;\n\nexport const deleteMenuItem = /* GraphQL */ `\n  mutation DeleteMenuItem($id: ID!) {\n    deleteMenuItem(id: $id) {\n      id\n    }\n  }\n`;\n\nexport const likeFeedItem = /* GraphQL */ gql`\n  mutation LikeFeedItem($feedItemPk: String!, $feedItemSk: String!) {\n    likeFeedItem(feedItemPk: $feedItemPk, feedItemSk: $feedItemSk) {\n      pk\n      sk\n      createdAt\n      content {\n        ordererName\n        delivererName\n        delivererPfp\n        restaurantName\n        restaurantImage\n      }\n      reactions {\n        reactionType\n        userId\n      }\n      numComments\n    }\n  }\n`;\n\nexport const acceptFriendRequest = /* GraphQL */ gql`\n  mutation AcceptFriendRequest($senderId: String!) {\n    acceptFriendRequest(senderId: $senderId) {\n      pk\n      sk\n      friends {\n        pk\n        sk\n        pfp\n        name\n        phoneNumber\n        cognitoId\n      }\n    }\n  }\n`;\n\nexport const declineFriendRequest = /* GraphQL */ gql`\n  mutation DeclineFriendRequest($senderId: String!) {\n    declineFriendRequest(senderId: $senderId) {\n      pk\n      sk\n      status\n      user {\n        pk\n        sk\n        phoneNumber\n        name\n        pfp\n        cognitoId\n      }\n    }\n  }\n`;\n\nexport const createFriendRequest = /* GraphQL */ gql`\n  mutation CreateFriendRequest($userId: String!) {\n    createFriendRequest(userId: $userId) {\n      pk\n      sk\n      status\n      user {\n        pk\n        sk\n        name\n        pfp\n        cognitoId\n        phoneNumber\n      }\n    }\n  }\n`;\n\nexport const deleteFriend = /* GraphQL */ gql`\n  mutation DeleteFriend($deleteId: String!) {\n    deleteFriend(deleteId: $deleteId) {\n      pk\n      sk\n      friends {\n        pk\n        sk\n        pfp\n        name\n        phoneNumber\n        cognitoId\n      }\n    }\n  }\n`;\n\nexport const updateUserAttributes = /* GraphQL */ gql`\n  mutation UpdateUserAttributes($name: String!) {\n    updateUserAttributes(name: $name) {\n      pk\n      sk\n      name\n    }\n  }\n`;\n\nexport const updateReferralCode = /* GraphQL */ gql`\n  mutation UpdateReferralCode($referralCode: String!) {\n    updateReferralCode(referralCode: $referralCode) {\n      pk\n      sk\n      cognitoId\n      name\n      referrer {\n        pk\n        sk\n        name\n        cognitoId\n      }\n    }\n  }\n`;\n\nexport const createReferralReward = /* GraphQL */ `\n  mutation CreateReferralReward($menuId: ID!, $isReferred: Boolean!) {\n    createReferralReward(menuId: $menuId, isReferred: $isReferred) {\n      id\n      userId\n      menuId\n      points\n    }\n  }\n`;","export default __webpack_public_path__ + \"static/media/bubble-icon-1.59b54bba.svg\";","export default __webpack_public_path__ + \"static/media/bubble-icon-2.7af7e509.svg\";","export default __webpack_public_path__ + \"static/media/ding.8e0939ed.mp3\";","export default __webpack_public_path__ + \"static/media/white-checkmark.fe085373.svg\";","export default __webpack_public_path__ + \"static/media/gray-checkmark.d0298c9b.svg\";","import React, { useState, useEffect, useRef } from 'react';\nimport dayjs from 'dayjs';\n\nimport downArrowBlue from '../assets/images/down-arrow-blue.png';\nimport downArrowGray from '../assets/images/down-arrow-gray.png';\n\ndayjs().format();\n\nfunction PartyContainer(props) {\n  const { partyOrders, selectedOrder, setSelectedOrder } = props;\n\n  const [expanded, setExpanded] = useState(false);\n\n  console.log(partyOrders.orders[0].restaurantFinishedPreparingTimeWindow ? 'viewed' : undefined);\n  const handleToggleExpand = (e) => {\n    e.preventDefault();\n    console.log('SKDGJH');\n    setExpanded(!expanded)\n  };\n\n  const handleSelectOrder = (e, order) => {\n    console.log(e);\n    e.stopPropagation();\n\n    setSelectedOrder(order);\n  }\n\n  return (\n    <div className={\"party-orders-container\"} onClick={handleToggleExpand}>\n      <div className='group-name-container'>\n        {partyOrders.partyViewed ? (\n          <img src={downArrowGray} className='down-arrow-button' alt=\"Click to expand viewed group\" width=\"28px\" height=\"14px\" />\n        ): (\n          <img src={downArrowBlue} className='down-arrow-button' alt=\"Click to expand unviewed group\" width=\"28px\" height=\"14px\" />\n        )}\n        <span className={partyOrders.partyViewed ? 'viewed' : undefined}>{partyOrders.delivererName}'s Group</span>\n      </div>\n      {expanded &&\n        <div className='party-orders-list'>\n          {partyOrders.orders.map(order => \n            <span key={order.id} className={order.restaurantFinishedPreparingTimeWindow ? 'viewed' : undefined} style={selectedOrder?.id === order.id ? { fontWeight: 900 } : { fontWeight: 500 }}onClick={(e) => handleSelectOrder(e, order)}>{order.customer.name}</span>\n          )}\n        </div>\n      }\n    </div>\n  )\n}\n\nexport default PartyContainer;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAA2CAYAAAA4T5zSAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAKRSURBVHgB7dzbbRpBGIbhmYECXAIlJA0Qu4OUQAdGIEQNICFtCy4hFcS54D4dhBJ8G4lD5rVAjg14T3P4h51HsgEbFul7LXm5Wa2OxuPxXb/ff7R3749f+G2MKZbL5ZPKaqm6p+bbfD4fbLfbn1rrwaWDHQ6HjT3Yw2Kx2KisVJ09XwNMp9M/15586UUqu6ps/BP23O12X3uz2WxkH49UCXvAu/1+/304HP5Yr9cvKjtTdXywp/36a2yJR1URB+YNeCOVvVNn/BP73G/G3n5RNeQI55qMf3RvVAM5wpsW478iwLNqIEdoP77itNT+D/ilGupyBAfjcyZUGHsqVHBKpBrqYgRH429Wq9WTKYrixUZ4yBGqcTU+m3Nfn35oPzoPer1e6wPf8oc1l+PbP/wNj/X/v8wRrvMxPvTHJ+UI53yND33pyTnCG5/jQ197UY7gf3zoz17c5QghxocuOUYnI4QaH6UB0KUIIcdHpQDoQoTQ46NyANxyhBjjo1YA3GKEWOOjdgDcUoSY46NRANxChNjjo3EApBxBwvhoFQApRpAyPloHQEoRJI0PJwGQQgRp48NZAEiOIHF8OA0AiRGkjg/nASApguTx4SUAJESQPj68BUDMCCmMD68BECNCKuPDewCEjJDS+AgSACEipDY+ggWAzwgpjo+gAeAjQqrjI3gAuIzA/VTHR5QAcBWB21THR7QAcBGhjdjjI2oAxIogYXxED4DQEaSMDxEBECqCpPEhJgB8R5A2PkQFgK8IEseHuABwHUHq+BAZAK4iSB4fYgOgbQTp40N0ADSNkML4EB8AdSOkMj6SCICqEVIaH8kEQFmE1MZHUgFOJpPJyBjDhaZO1zp65qIjXPeCSy+ohPwDtXgVsjUHP5kAAAAASUVORK5CYII=\"","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAA2CAYAAAA4T5zSAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJeSURBVHgB7Zz/TcMwEIXPmYAROgJMAGzCBmUBpIoJugKTQDfoBnQEJiD4Nc0/QJvEse/epf4kpApM7Htff9iN5SA9m/ZGGllLKw8S4g9oZR9/t5WX8CaVaYzMM5war+If3uOj1ZnLHeRbHmUTDlIZZkKenYDX9vNC4z//JJXzDIffgzzvmhj+04jGcmyDC6ODyv+MD1+ObYI8N/HBWsZTJZxjWvg99xBwK9OoEn6TFj4+gR8aSaNK6EkN/0QTp0YfkkaVMDP8yB6vgJ2kc70S5oePt6AtXgFbwZQoneuTkCN8ZB4XZE2c138d5/dVwjhyhd9lfloJ577wUhdrBTIKpTtYDIWyCVoduaZgJkG7Q3cUziKIUccuUMggiPEAaFGq/bIAxYFQoVjzsADlAZmjXOs4ASLXIcGgxvECwJIlGNU2TQBYogTDmqYLAEuSYFxLmgCwBAkENaQLAJ4lkIx9ngDgUQLRmOcLAJ4kkI01jwDgQQLhGPMJAMwSSMeWVwBgLJT4iZFfAGAqmPytsYwAwFC4g8+lcgKAZQBOZmZlBQCLIBxNi8sLAJqBOFsY6ggAGsE4XJXrCQAlA3L6vZSuAFAiKKfhA30BIGdgwPHX4jYCQC4JHStJx/SehJ0AkEfCHMzvytkKAHYSKG6J2gsA+hJoNgVwCAB6Eqh2ZPAIAOUl0O1J4hIAykmg3BDGJwDkl0C7JZJTAMgngTZ8wCsAzJdAHT7gFgDSJdCHD/gFgOkSXIQPfAgA4yW4CR/4EQCGJbgKH/gS0INTvlpZx9F3Zx11J77sjude4OgFR/wA9w0Jm3F3/W8AAAAASUVORK5CYII=\"","import React, { useState, useEffect, useRef } from 'react';\nimport dayjs from 'dayjs';\n\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\n\nimport awsConfig from '../utils/awsConfig';\nimport useInterval from '../utils/useInterval';\nimport * as queries from '../graphql/queries';\nimport * as mutations from '../graphql/mutations';\nimport * as subscriptions from '../graphql/subscriptions'\nimport * as customQueries from '../graphql/customQueries';\nimport * as customMutations from '../graphql/customMutations';\nimport * as customSubscription from '../graphql/customSubscriptions';\n\nimport loadingBubbleIcon from '../assets/images/bubble-icon-1.svg';\nimport bubbleIcon from '../assets/images/bubble-icon-2.svg';\nimport whiteCheckmark from '../assets/images/white-checkmark.svg';\nimport grayCheckmark from '../assets/images/gray-checkmark.svg';\nimport ding from '../assets/audio/ding.mp3';\nimport { ConsoleLogger } from '@aws-amplify/core';\nimport { useQuery, useMutation } from '@apollo/client';\n\nimport PartyContainer from '../components/PartyContainer';\n\ndayjs().format();\n\nfunction PortalOrders(props) {\n  const { restaurant } = props;\n\n  const newOrderTimeStamp = 30;\n  const preparingOrderTimeStamp = 15;\n  const readyOrderTimeStamp = 5;\n  const deliveredOrderTimeStamp = 0;\n  const cancelledOrderTimeStamp = -1;\n  const dingTimer = 5000;\n  const orderTimes = [10, 15, 20, 25, 30, 45, 60, 75];\n\n  const audio = new Audio(ding);\n  const [loading, setLoading] = useState(false);\n  //const [audio] = useState(new Audio(ding));\n  const [selectedOrder, setSelectedOrder] = useState(null); \n  const [receivingOrders, setReceivingOrders] = useState(true);\n  const [hasNew, setHasNew] = useState(false);\n\n  let timerId;\n\n  let { data: ordersData, loading: ordersLoading, error: ordersError } = useQuery(customQueries.LIST_ORDERS_BY_RESTAURANT, {\n    variables: {\n      restaurantId: restaurant?.id,\n    },\n    skip: !(restaurant?.id),\n    pollInterval: 60 * 1000,\n  });\n  let [updateOrderETA, { error: updateOrderETAError }] = useMutation(customMutations.UPDATE_ORDER_ETA, {\n    onCompleted(data) {\n      // console.log('', data.updateOrderETA);\n      // const oldSelectedOrder = JSON.parse(JSON.stringify(selectedOrder));\n      // oldSelectedOrder.party = data.updateOrderETA.party;\n      // oldSelectedOrder.estimatedDeliveryTimeWindow = data.updateOrderETA.estimatedDeliveryTimeWindow;\n      // oldSelectedOrder.restaurantFinishedPreparingTimeWindow = data.updateOrderETA.restaurantFinishedPreparingTimeWindow;\n      // oldSelectedOrder.restaurantFinishedPreparingMinutes = data.updateOrderETA.restaurantFinishedPreparingMinutes;\n      // setSelectedOrder(oldSelectedOrder);\n    }\n  });\n\n  let ordersByParty = {};\n  let hasUnviewed = false;\n\n  if (ordersData?.listOrdersByRestaurant) {\n    let orders = ordersData.listOrdersByRestaurant;\n    console.log('', orders);\n\n    for (const order of orders) {\n      if (!ordersByParty[order.party.id]) {\n        ordersByParty[order.party.id] = {\n          delivererName: order.deliverer.name,\n          partyViewed: true,\n          orders: [],\n        };\n      }\n      ordersByParty[order.party.id].orders.push(order);\n    }\n\n    for (const [key, value] of Object.entries(ordersByParty)) {\n      console.log(key, value);\n      for (const order of value.orders) {\n        if (!order.restaurantFinishedPreparingTimeWindow) {\n          ordersByParty[key].partyViewed = false;\n          break;\n        }\n      }\n    }\n\n    hasUnviewed = false;\n    for (const [key, value] of Object.entries(ordersByParty)) {\n      if (!ordersByParty[key].partyViewed) {\n        hasUnviewed = true;\n        break;\n      }\n    }\n    console.log(ordersByParty);\n  }\n\n  useInterval(() => {\n    audio.play();\n  }, hasUnviewed ? dingTimer : null);\n\n  useEffect(() => {\n    if (ordersData?.listOrdersByRestaurant) {\n      for (const order of ordersData.listOrdersByRestaurant) {\n        if (order.id === selectedOrder?.id) {\n          setSelectedOrder(order);\n          break;\n        }\n      }\n    }\n  }, [ordersData, selectedOrder]);\n\n  return (\n    <article className=\"portal-orders-container\">\n    {ordersLoading || !ordersByParty ? \n      <div>\n        <header>\n          <img className=\"portal-empty-image\" src={loadingBubbleIcon} />\n          <span className=\"subheading\">Loading...</span>\n        </header>\n      </div>  \n    :\n      <div>\n        {Object.keys(ordersByParty).length > 0 ?\n          <div className=\"portal-orders-subcontainer\">\n            <div className=\"orders-list\">\n              <div>\n                {Object.entries(ordersByParty).map(([party, partyOrders]) => \n                  <PartyContainer key={party} partyOrders={partyOrders} selectedOrder={selectedOrder} setSelectedOrder={setSelectedOrder}/>\n                )}\n              </div>\n              {/* <div>\n                \n                <div className=\"order-category-container\">\n                  {Object.keys(orders).map((category =>\n                    <div key={category}>\n                      {orders[category].length > 0 &&\n                        orders[category].sort((order1, order2) => (order1.time.split(\" \")[1] + order1.time.split(\" \")[0] > order2.time.split(\" \")[1] + order2.time.split(\" \")[0] ? 1 : -1)).map(order => \n                          <div key={order.id} className={selectedOrder == order ? \"order-container active\" : \"order-container\"} onClick={() => {selectOrder(order); console.log(order)}}>\n                            <span>#{order.id.slice(0, 5)}...</span> \n                            <span>{category == \"New\" ? <button>New</button> : \"\"}</span>\n                          </div>\n                        )\n                      }\n                    </div>\n                  ))}\n                </div>\n              </div>*/}\n            </div>\n            {!selectedOrder ? (\n              <div className='selected-order-container'>\n                <p className='click-order-text'>\n                  Click on an order in a group to view\n                </p>\n              </div>\n            ) : (\n              <div className=\"selected-order-container\">\n                <div className=\"split-row\">\n                  <span className=\"orderer-name\">\n                    {selectedOrder.customer.name}\n                  </span>\n                  <span className=\"order-date\">\n                    {dayjs(selectedOrder.orderSentTime).format('MM/DD/YY hh:mmA')}\n                  </span>\n                </div>\n\n                <hr className=\"divider\" />\n\n                {selectedOrder.items.map(item => \n                  <div className=\"split-row\">\n                    <div className=\"item-container\">\n                      <span className=\"item-name\">\n                        {item.name}\n                      </span>\n                      {item.foodOptions.map(foodOption => (\n                        foodOption.options.map(option => <span className=\"item-option-name\">{option.name}</span>)\n                      ))}\n                    </div>\n                    <span className=\"item-price\">\n                      {(item.price / 100).toFixed(2)}\n                    </span>\n                  </div>\n                )}\n                <div className='split-row'>\n                  <span className='item-name-gray'>\n                    Tax\n                  </span>\n                  <span className='item-price-gray'>\n                    {(selectedOrder.tax / 100).toFixed(2)}\n                  </span>\n                </div>\n                <div className='split-row'>\n                  <span className='item-name-gray'>\n                    Tip\n                  </span>\n                  <span className='item-price-gray'>\n                    {(selectedOrder.tip / 100).toFixed(2)}\n                  </span>\n                </div>\n                <div className='split-row'>\n                  <span className='item-name'>\n                    Total\n                  </span>\n                  <span className='item-price'>\n                    ${(selectedOrder.totalPrice / 100).toFixed(2)}\n                  </span>\n                </div>\n\n                <hr className='divider' />\n                \n                <span className='item-name-left'>\n                  Order Time (min)\n                </span>\n                <span className='item-name-left-small'>\n                  Click a button to select\n                </span>\n\n                {selectedOrder.restaurantFinishedPreparingMinutes ? (\n                  <span className='item-name-center-big'>\n                    You have selected {selectedOrder.restaurantFinishedPreparingMinutes} minutes.\n                  </span>\n                ) : (\n                  <div className='time-container'>\n                    {orderTimes.map((orderTime, index) =>\n                      <div \n                        className={index === 0 || index === 7 ? (index === 0 ? 'left' : 'right') : undefined}\n                        onClick={() => updateOrderETA({ variables: { partyId: selectedOrder.party.id, orderId: selectedOrder.id, orderFinishedPreparingMinutes: orderTime } })}>\n                        <span>\n                          {orderTime}\n                        </span>\n                      </div>  \n                    )}\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        :\n          <header>\n            <img className=\"portal-empty-image\" src={bubbleIcon} />\n            <span className=\"subheading\">You have no active orders.</span>\n            <b>Orders placed through the Toppings app today <br /> will appear here.</b>\n          </header>\n        }\n      </div>\n    }\n    </article>\n  );\n}\n\nexport default PortalOrders;","import React, { useState, useEffect, useRef } from 'react';\n\nfunction PortalTermsService(props) {\n  return (\n    <article className=\"portal-terms-container\">\n      <header>\n        <span className=\"heading\">Terms of Service</span>\n      </header>\n\n      <div className=\"content\">\n        <div className=\"terms-of-service-container\">\n          <p><b>BEFORE YOU USE THE TOPPINGS MARKETPLACE, CAVIAR MARKETPLACE, AND/OR TOPPINGS PORTAL (\"PLATFORM\") PLEASE READ THESE TERMS CAREFULLY. BY EXECUTING THE SIGN-UP SHEET WITH TOPPINGS OR USING THE PLATFORM, YOU, ANY ENTITIES THAT YOU REPRESENT AND ALL OF YOUR PARTICIPATING STORE LOCATIONS (\"YOU\" OR \"MERCHANT\") AGREE TO BE BOUND BY THESE TERMS IN ADDITION TO THE TERMS ON YOUR SIGN-UP SHEET.\nSECTION 19 OF THIS AGREEMENT CONTAINS PROVISIONS THAT GOVERN HOW CLAIMS THAT YOU AND WE HAVE AGAINST EACH OTHER ARE RESOLVED, INCLUDING, WITHOUT LIMITATION, ANY CLAIMS THAT AROSE OR WERE ASSERTED BEFORE THE EFFECTIVE DATE OF THIS AGREEMENT. IN PARTICULAR, SECTION 19 SETS FORTH OUR ARBITRATION AGREEMENT WHICH WILL, WITH LIMITED EXCEPTIONS, REQUIRE DISPUTES BETWEEN US TO BE SUBMITTED TO BINDING AND FINAL ARBITRATION. UNLESS YOU OPT OUT OF THE ARBITRATION AGREEMENT: (1) YOU WILL ONLY BE PERMITTED TO PURSUE CLAIMS AND SEEK RELIEF AGAINST US ON AN INDIVIDUAL BASIS, NOT AS A PLAINTIFF OR CLASS MEMBER IN ANY CLASS OR REPRESENTATIVE ACTION OR PROCEEDING; AND (2) YOU ARE WAIVING YOUR RIGHT TO SEEK RELIEF IN A COURT OF LAW AND TO HAVE A JURY TRIAL ON YOUR CLAIMS. THE ARBITRATION AGREEMENT COULD AFFECT YOUR RIGHT TO PARTICIPATE IN PENDING PROPOSED CLASS ACTION LITIGATION. PLEASE SEE SECTION 19 FOR MORE INFORMATION REGARDING THIS ARBITRATION AGREEMENT, THE POSSIBLE EFFECTS OF THIS ARBITRATION AGREEMENT, AND HOW TO OPT OUT OF THE ARBITRATION AGREEMENT.\n</b></p>\n          <ol>\n            <li><b>Definitions.</b>\n              <ol type=\"a\">\n                <li>Topper means independent third-party delivery contractor.</li>\n                <li>Delivery API means the Toppings application programming interface (API) that allows the Merchant to exchange information with Toppings.</li>\n                <li>Toppings Data shall mean any information that Toppings provides or makes accessible to Merchant through the Toppings Platform, including without limitation Personal Information.</li>\n                <li>Customer means the customer who places an order for Merchant Products through the Toppings Platform or Toppings Portal.</li>\n                <li>Toppings Marketplace means Toppings proprietary online communication platform where Customers can view and search for the menus of Merchants and/or place an order for Merchant Products via the Toppings website or mobile application for delivery by a Topper to the Customer or for pickup by Customer.</li>\n                <li>Toppings Platform means Toppings Marketplace or Toppings App.</li>\n                <li>Toppings Portal means the platform that enables delivery fulfillment for orders placed directly with the Merchant by the Customer.</li>\n                <li>Toppings Services means Toppings Platform and, Toppings Portal, as applicable.</li>\n                <li>Portal Orders means orders placed by Merchant for delivery fulfilment by Toppings.</li>\n                <li>Portal Term means the term of the agreement between Toppings and Merchant for Toppings Portal.</li>\n                <li>Marketplace Orders means orders for Merchant Products through the Toppings Platform from Customers for delivery by Toppers.</li>\n                <li>Merchant means the restaurant or other entity that has agreed to participate in the Toppings Services.</li>\n                <li>\"Merchant Portal\" is an online website, accessible at https:toppingsapp.com through which Merchant may and regularly should review and confirm its transactions, fees and charges and account on the Platform.</li>\n                <li>Merchant Products includes all products offered for take-out or delivery orders at Merchant Stores.</li>\n                <li>Merchant Stores means the Merchant restaurant locations that participate in the Toppings Services and includes: (i) Merchant Stores owned and operated by Merchant or its affiliates, and/or (ii) Merchant Stores owned and operated by Franchisees of Merchant or its affiliates.</li>\n                <li>Marketplace Term means the term of the agreement between Toppings and Merchant for the Toppings Platform.</li>\n                <li>Order means a Marketplace Order or a Portal Order, as applicable.</li>\n                <li>Order Equipment means and includes any equipment reasonably required by Toppings for Merchant to receive and process Orders, including, without limitation, a tablet, fax machine, or other automated, electronic means of receiving Orders.</li>\n                <li>Personal Information shall mean any information exchanged under this Agreement that (i) identifies or can be used to identify an individual (including without limitation, names, telephone numbers, addresses, signatures, email addresses or other unique identifiers); or (ii) that can reasonably be used to authenticate an individual (including without limitation, name, contact information, precise location information, access credentials, persistent identifiers and any information that may be considered personal data or personal information under applicable law).</li>\n                <li>Commission Rate means the commission fees collected by Toppings in exchange for promoting and featuring the Merchant and Merchant Store(s) on the Toppings Platform, which is charged as a percentage of revenues transacted on the Toppings Platform.</li>\n                <li>Schedule for Later Order shall mean an Order to be fulfilled at a particular time later in the same day or at a later date.</li>\n                <li>Terms means the provisions herein.</li>\n                <li>Third Party Platform means a technology interface, such as a middleware technology platform, other than the online order form and the Delivery API that enables Merchant to request delivery fulfillment and provide information necessary to enable such delivery fulfillment.</li>\n              </ol>\n            </li>\n            <li><b>The Parties' Relationship.</b> Toppings provides an online marketplace platform using web-based technology that connects Merchants, independent delivery contractors (\"Toppers\") and Customers (\"Platform\"), as described in these Terms for Toppings Platform and Toppings Portal. Toppings is not a merchant, seller of goods, or delivery service; it is an online connection platform. Merchant and Toppings agree they are independent businesses whose relationship is governed by the Sign-Up Sheet and these Terms. Nothing in the Parties' agreements, relationship or transactions shall create or be construed as creating an agency, partnership, fiduciary or joint venture relationship between Toppings and Merchant (or Merchant's employees, representatives or locations), Toppings and Topper, or Toppings and Customers. Except as expressly set forth in the Sign-Up Sheet and these Terms, each Party shall be responsible for its own expenses, profits and losses.</li>\n            <li><b>Toppings Platform Core Responsibilities.</b> . For Merchants that have agreed to participate in the Toppings Platform, Toppings and Merchant shall have the following responsibilities during the Marketplace Term:\n              <ol type=\"a\">\n                <li>Toppings Core Responsibilities. Toppings will, in a timely manner:\n                  <ol type=\"i\">\n                    <li>Display Merchants logo; a listing of the Merchant Stores; and a menu of Merchant Products on the Toppings Platform;</li>\n                    <li>Accept Marketplace Orders from Customers;</li>\n                    <li>Forward each Marketplace Order to the relevant Merchant Store; and</li>\n                    <li>Forward each Marketplace Order to a Topper, so that the Topper can pick up the applicable Merchant Product(s) from the Merchant Store to deliver to the Customer.</li>\n                    <li>Pay the Merchant in accord with the Parties' agreements, deduct the applicable Commission Rate, marketing fees (for identifiable orders), subscription fees,  Activation Fees, and any other fees (in each case, as may be adjusted by Toppings as required by any applicable statute, regulation, executive order, or other legal requirement that is either temporary or permanent in nature).</li>\n                  </ol>\n                </li>\n                <li>Merchant Core Responsibilities. Merchant will, in a timely manner:\n                <ol type=\"i\">\n                    <li>Provide Toppings with the Merchants in-store or take-out menu, including the price of each item on such menu;</li>\n                    <li>Monitor Merchants menu and store information on the Toppings Platform, promptly make updates via the Merchant Portal to reflect the most up-to-date products, pricing and other information or immediately notify Toppings of any errors or changes in writing;</li>\n                    <li>Accept all Marketplace Orders placed by Toppings from Merchants then-current menu;</li>\n                    <li>Confirm all Marketplace Orders from Toppings;</li>\n                    <li>Prepare the Merchant Products for each Marketplace Order for pickup by a Topper at the designated time;</li>\n                    <li>Process Marketplace Orders in the order in which they are received;</li>\n                    <li>Notify Toppings of any changes to the pricing, availability, description, or other characteristics of the Merchant Products;</li>\n                    <li>Notify Toppings of its days and hours of operation, and remain open for business on Toppings the same days and hours of operation as Merchants in-store business; notify Toppings of any changes to Merchants hours of operations on holidays; and notify Toppings if Merchant closes earlier than Merchants standard hours of operation or plans to close earlier than Merchants standard hours of operation;</li>\n                    <li>Notify all Merchant store staff members of the relationship with Toppings immediately upon execution of this Agreement;</li>\n                    <li>Provide the same utensils, napkins, bags and other materials that Merchant would typically provide in a standard take-out or delivery order, subject to Section 15(3)(i);</li>\n                    <li>On an ongoing basis, review and confirm the transactions, fees and charges on orders via the Merchant Portal, and promptly communicate to Toppings any inaccuracies; and</li>\n                    <li>If Toppings collects and passes tips from Customers to Merchant, Merchant will distribute such tips in accordance with applicable law, including but not limited to tip pooling laws.</li>\n                  </ol>\n                </li>\n              </ol>\n            </li>\n            <li><b>Toppings Portal Core Responsibilities.</b> For Merchants that have agreed to participate in Toppings Portal, Toppings and Merchant shall have the following responsibilities during the Portal Term:\n              <ol type=\"a\">\n                <li>Toppings Core Responsibilities. Toppings will, in a timely manner:\n                  <ol type=\"i\">\n                    <li>Provide Merchant with an online order form or access to the Delivery API to submit requests for deliveries, or receive information through a Third Party Platform;</li>\n                    <li>Forward requests to a Topper, so that the Topper can pick up the applicable Merchant Product(s) from the Merchant Store to deliver to the Customer.</li>\n                  </ol>\n                </li>\n                <li>Merchant Core Responsibilities. Merchant will:\n                  <ol type=\"i\">\n                    <li>Via the online order form, the Delivery API, or a Third Party Platform, provide information requested by Toppings including the Customers address, contact information, and any special instructions required for delivery; </li>\n                    <li>Accept and collect payments from Customers for their respective orders;</li>\n                    <li>Notify Customers prior to placing a Portal Order that their telephone numbers and other personal contact information will be shared with Toppings to enable deliveries to be made by Toppers and, in connection with the applicable deliveries, request the Customers consent to receive delivery status updates by e-mail, text messages, and telephone calls from Toppings and Toppers;</li>\n                    <li>Notify Toppings if a Customer has not consented to receive delivery updates or has placed any restrictions on types of delivery updates such Customer consents to receive (e.g., no texts). Merchant hereby consents to receiving text messages and email confirmations from Toppings providing status updates and delivery confirmations in connection with each delivery.</li>\n                    <li>On an ongoing basis, review and confirm the transactions, fees and charges on invoices and via the Merchant Portal, and promptly communicate to Toppings any inaccuracies.</li>\n                  </ol>\n                </li>\n                <li>Portal Operating Procedures.\n                  <ol type=\"i\">\n                    <li>Order Placement. Merchant agrees to submit a Portal Order for delivery fulfillment at least twenty-four (24) hours in advance of scheduled delivery, and in no event less than two (2) hours in advance of scheduled pick-up. Exceptions will be mutually agreed to by the Parties.</li>\n                    <li>Hours of Operation. The pickup and dropoff of deliveries will be scheduled to take place during Toppingss standard hours of availability, as may be updated from time to time in Toppingss sole discretion. Merchant agrees to abide by the following standard procedures: (i) to notify Toppings of any changes to its hours of operations on federal holidays with reasonable advance notice; and (ii) to notify Toppings with reasonable advance notice if a Merchant location closes earlier than standard hours of operation or plans to close earlier than standard hours of operation.</li>\n                    <li>Delivery Radii. Toppings will only accept Portal Orders to be delivered within a certain preset delivery radius based on either the Merchant or the End-Customer location, which will be communicated to Merchant.</li>\n                    <li>Cancellations. Fees owed for any Portal Orders cancelled within twenty-four (24) hours of a Schedule for Later delivery are non-refundable. If provided more than two (2) hours notice, but less than twenty-four (24) hours notice, Toppings will make reasonable efforts to accommodate changes. </li>\n                    <li>Notification. Merchant agrees to notify all staff members in Merchant Stores of Merchants relationship with Toppings prior to submitting any delivery requests to Toppings.</li>\n                  </ol>\n                </li>\n              </ol>\n            </li>\n            <li><b>Refunds and Re-Orders.</b> Refunds and re-orders will be addressed as follows:\n              <ol type=\"a\">\n                <li>Marketplace Order Refunds. In the event that Toppings, in its sole reasonable discretion, has to issue a refund, credit or re-order on an Customers Order, Merchant will prepare the food to the same specifications as the original Order (in the case of a re-order) and bear the full cost of that refund, credit or re-order, as applicable, unless the refund, credit or re-order is due to the fault of the Topper or Toppings.</li>\n                <li>Portal Order Refunds. Merchant acknowledges and agrees that Toppings shall be responsible only for facilitating the delivery of Merchant Product(s) to Customers. Merchant shall be solely responsible for any customer complaints regarding Merchant Product(s), including without limitation, complaints regarding the nature, quality, content, number, or packaging of Merchant Product(s). Merchant agrees not to refer any Customer complaints directly to Toppings. Any complaints regarding the timeliness or quality of a Toppers delivery service shall be reported by Merchant to Toppings. If the completion of a Portal Order is more than 45 minutes late and due to fault of Toppings, Toppings will reimburse Merchant for all or a portion of the delivery cost of the applicable Portal Order. If Merchant elects to refund a Customer for any reason, such election shall not obligate Toppings to provide a corresponding reimbursement to Merchant. In the event that a Merchant Product has been visibly damaged with proof from Customer, Toppings may reimburse Merchant for all or a portion of the order subtotal. For the purposes of this agreement, Merchant Product is the actual food or beverage item, not the packaging that contains the Merchant Product. In no event shall Toppings be obligated to issue any refunds directly to Customers.</li>\n              </ol>\n            </li>\n            <li><b>Order Equipment. </b>With respect to the Toppings Platform, Merchant will install any equipment reasonably required by Toppings for Merchant to receive and process Orders (including, without limitation, a tablet, fax machine, or other automated, electronic means of receiving Orders) (Order Equipment). If any Order Equipment is provided by Toppings, Merchant will pay Toppings an Order Equipment Fee, as set forth in the Sign-Up Sheet, in exchange for the right to use the Order Equipment to access the Toppings Platform in order to receive, process, and accept Marketplace Orders. Any Order Equipment provided by Toppings will remain Toppingss sole property and may be used solely for purposes related to fulfilling Merchants responsibilities under this Agreement. Merchant will inspect all hardware, and shall notify Toppings in writing if any Order Equipment is missing or was damaged as soon as practicable after discovering such damage. Toppings may restrict or rescind Merchants right to use the Toppings Platform at any time. Merchant will be responsible for any damage to or loss of any Order Equipment provided by Toppings (excluding ordinary wear and tear), which will be promptly reimbursed by Merchant (at the replacement cost thereof). Toppings may recover the replacement cost of damaged or lost Order Equipment by deducting such amount from weekly payments. Merchant agrees to pay all subscription fees and deposits reasonably charged by Toppings for Order Equipment, and agrees Toppings may deduct such fees and deposits from amounts payable by Toppings to Merchant.</li>\n            <li><b>Payment, Fees, Title and Taxes. </b>Payment, fees, and taxes shall be addressed as follows:\n              <ol type=\"a\">\n                <li>Toppings Platform. Toppings will pay for Marketplace Orders fulfilled by Merchant each week on a consistent day of the week, subject to change with no less than 10 days notice to Merchants by email or service notification. Toppings shall be entitled to deduct from such payments Toppingss Commission Rate, marketing fees (for identifiable orders), Activation Fees, subscription fees, and any other fees which Toppings may notify you regarding with at least 7 days advance written notice. Merchant shall be responsible for all taxes, duties, and other governmental charges on the sale of Merchant Products and for remitting such taxes, duties, and other governmental charges to the appropriate authorities. In the event that Merchant raises the price for a menu item, Toppings shall not be required to remit the higher price to the Merchant until 3 business days after the Merchant first provides notice to  Toppings of such pricing change.</li>\n                <li>Toppings Portal. Merchant will pay Toppings a fee per Portal Order as mutually agreed. Merchant shall be responsible for all taxes, duties, and other governmental charges on the sale of Merchant Products and for remitting such taxes, duties, and other governmental charges to the appropriate authorities. As agreed by the parties, payment of all fees under this Section 8(b) shall be as follows: (i) Merchant shall pay the fees by credit card or ACH at the time of ordering, or (ii) Toppings shall invoice Merchant on a monthly basis and Merchant shall pay the invoice within seven (7) days of receipt of such invoice. If any fee is not paid in full by the due date, Toppings may assess interest on the unpaid amount for the period beginning on the Payment Date and ending on the date that the amount is paid in full. The amount of interest to be paid shall not exceed the maximum rate under applicable law.</li>\n                <li>To the extent that a third party provider provides services to Merchant via the Platform (for example, a middleware provider) and charges fees to Toppings, Toppings may pass through such third partys fees to Merchant.</li>\n                <li>In some jurisdictions in the United States, Toppings may be required to collect sales, use, or similar taxes from the Customer and remit such taxes directly to the tax authority. In such jurisdictions, Toppings will inform Merchant that Toppings will remit Collected Taxes to the tax authority and Toppings will be relieved of any responsibility to remit such Collected Taxes to Merchant.</li>\n                <li>Merchant agrees, on an ongoing basis, to review and confirm its transactions, fees and charges on orders and invoices and via the Merchant Portal, and to promptly communicate to Toppings in writing any claimed inaccuracies, so that Toppings has the prompt opportunity to address and resolve any issues and so such issues do not persist, which Toppings and Merchant agree is in the best interests of both parties and their commercial relationship. Merchant agrees to communicate to Toppings any disagreement, non-conformity or any issue with any transaction, fee, charge or order within 60 days of the transaction, fee or order. Merchant shall be deemed to have acquiesced in and ratified, and to have waived any claim or objection regarding, each transaction, fee, charge and order if Merchant does not communicate a written claim or objection to Toppings regarding such transaction, fee, charge or order within such 60-day period.</li>\n                <li>Merchant agrees that Merchant holds title to the goods or products that Merchant provides through the Platform until the goods are picked up from Merchant, and that title passes from the Merchant to the Customer upon pickup at the Merchants location. Merchant agrees that neither the Topper nor Toppings holds title to or acquires any ownership interest in any goods or products that Merchant prepares or provides through the Platform.</li>\n              </ol>\n            </li>\n            <li><b>Payment Processing.</b> Payment processing services for Merchants on the Toppings Platform are provided by Stripe and are subject to the Stripe Connected Account Agreement, which includes the Stripe Services Agreement. By agreeing to these Terms, Merchant agrees to be bound by the Stripe Connected Account Agreement and the Stripe Services Agreement, as the same may be modified by Stripe from time to time. As a condition of Toppings enabling payment processing services through Stripe, Merchant agrees to provide Toppings accurate and complete information about Merchants representative and its business, and Merchant authorizes Toppings to share it and transaction information related to Merchants use of the payment processing services provided by Stripe. Stripe has been audited by a PCI-certified auditor and is certified to PCI Service Provider Level 1.</li>\n            <li><b>Merchant Content and Trademark; Photographs of Menu Items.</b>\n              <ol type=\"a\">\n                <li>During the Marketplace Term Merchant grants to Toppings a royalty-free, non-exclusive, limited, revocable, non-transferable, non-sublicensable right and license to use and display the Merchant Content in the provision of services to Merchant, including listing Merchant as a merchant on the Toppings Platform, referencing Merchant as a Toppings partner, and to promote Toppingss products and services. As used herein, Merchant Content includes, without limitation, menus, photographs (either provided by Merchant or on Merchants website), trademarks, logos and other materials provided by Merchant to Toppings.</li>\n                <li>If photographs of Merchants menu items are not available or if they do not meet Toppingss requirements, as reasonably determined by Toppings, then Merchant consents to Toppings (i) engaging a professional photographer to take photographs of Merchants menu items (ii) enhancing the quality of Merchants existing photographs or (iii) using stock photos of the menu item, and displaying such photographs on the Toppings Platform as representations of Merchants menu items; provided that Merchant may contact Toppings support to have such photographs removed from the Merchants store listing and, in such event, Toppings will comply in a timely manner.</li>\n              </ol>\n            </li>\n            <li><b>Confidential Information.</b>\n              <ol type=\"a\">\n                <li>The term Confidential Information shall mean any confidential or proprietary business, technical or financial information or materials of a party (Disclosing Party) provided to the other party (Receiving Party) in connection with this Agreement, whether orally or in physical form, and shall include the terms of this Agreement. Without limiting the foregoing, Toppings Data is the Confidential Information of Toppings.</li>\n                <li>Confidential Information does not include information that: (i) was rightfully known to the Receiving Party without restriction on use or disclosure prior to such information's being disclosed to the Receiving Party in connection with this Agreement; (ii) was or becomes public domain other than by the fault of the Receiving Party; (iii) was or is received by the Receiving Party on a non-confidential basis from a third party that, to the Receiving Party's knowledge, was not at the time under any obligation to maintain its confidentiality; or (iv) the Receiving Party can demonstrate by documentary records was independently developed by the Receiving Party without access to, use of or reference to any Confidential Information.</li>\n                <li>The Receiving Party shall: (i) not access or use Confidential Information other than as necessary to exercise its rights or perform its obligations in accordance with this Agreement; (ii) except subject to its compliance with Section 11(d), not disclose or permit access to Confidential Information other than to its or any of its employees, officers, directors, consultants, agents, independent contractors, service providers, subcontractors and legal advisors (Representatives) who need to know such Confidential Information for purposes of the Receiving Party's exercise of its rights or performance of its obligations under and in accordance with this Agreement, and prior to any such disclosure are bound by written confidentiality and restricted use obligations at least as protective of the Confidential Information as the terms set forth in this Section; and (iii) safeguard the Confidential Information from unauthorized use, access or disclosure using at least the degree of care it uses to protect its most/similarly sensitive information and in no event less than a reasonable degree of care.</li>\n                <li>If the Receiving Party is compelled by applicable Law to disclose any Confidential Information then, to the extent permitted by applicable Law, the Receiving Party shall promptly notify the Disclosing Party in writing of such requirement so that the Disclosing Party can seek a protective order or other remedy or waive its rights under Section 11(c) and provide reasonable assistance to the Disclosing Party, at the Disclosing Party's sole expense, in opposing or seeking protective limitations on disclosure.</li>\n              </ol>\n            </li>\n            <li><b>Data Privacy and Security.</b>\n              <ol type=\"a\">\n                <li>General. Merchant agrees not to access, collect, store, retain, transfer, use, disclose, or otherwise process in any manner Toppings Data, including without limitation Personal Information, except as required to perform under this Agreement. Merchant shall keep Toppings Data secure from unauthorized access and maintain the accuracy and integrity of Toppings Data in Merchants custody or control by using appropriate organizational, physical and technical safeguards. If Merchant becomes aware of any unauthorized access to Toppings Data, Merchant will immediately notify Toppings, consult and cooperate with investigations and potentially required notices, and provide any information reasonably requested by Toppings. Merchant agrees to implement and use security procedures, protocols or access credentials as reasonably requested by Toppings and will be responsible for damages resulting from Merchants failure to comply. Merchant will not allow any third party to use the Toppings Platform and will be responsible for damages resulting from sharing Merchants login credentials with unauthorized third parties or otherwise permitting unauthorized access to Merchants account. Merchants may not allow any third party to copy, modify, rent, lease, sell, distribute, reverse engineer, or otherwise attempt to gain access to the source code of the Toppings Platform; damage, destroy or impede the services provided through the Toppings Platform; transmit injurious code; or bypass or breach any security protection on the Toppings Platform.</li>\n                <li>Delivery API. During the Term, Toppings grants to Merchant a non-exclusive, royalty-free, non-assignable, non-transferable, non-sublicensable, revocable, limited, fully paid-up license to access the Delivery API solely to transmit information to facilitate the Toppings Portal services. Merchant will not and will not permit or authorize any third party to (i) sell, license, rent, resell, lease, assign (except as permitted herein), transfer, or otherwise commercially exploit the Delivery API; (ii) circumvent or disable any security or other technological features or measures of, or otherwise gain or attempt to gain unauthorized access to the Delivery API; (iii) reverse engineer, dissemble, decompile, or otherwise attempt to derive the source code or the underlying ideas, algorithms, structure, or organization of the Delivery API; (iv) use the Delivery API in any manner or for any purpose that violates any law or regulation; and (v) use the Delivery API for a reason other than as specifically provided or intended under this Agreement. Each Party agrees not to perform any action with the intent of introducing to the other Partys systems, products, or services (including the Delivery API) any viruses, worms, defect, Trojan horses, malware, or any items of a destructive nature.</li>\n              </ol>\n            </li>\n            <li><b>Termination.</b> Merchant may terminate this Agreement for any reason at any time upon seven (7) days prior written notice. Toppings may terminate this Agreement or any promotion under this Agreement for any reason at any time upon written notice. Email shall suffice for written notice. Neither Merchant nor Toppings will be required to pay any fee in connection with a termination by either party, or be liable to the other as a result of termination of this Agreement for any damages, for the loss of goodwill, prospective profits or anticipated income, or for any expenditures, investments, leases or commitments made by either Merchant or Toppings.</li>\n            <li><b>Modifications.</b> Toppings reserves the right, at its sole discretion, to change, suspend, or discontinue the Platform (including without limitation, the availability of any feature or content) at any time. Toppings may, at its sole discretion, remove Merchant Products or Stores from the Toppings Platform if Toppings determines that such Merchant Product or Merchant Store could subject Toppings to undue regulatory risk, health and safety risk, or other liability. Toppings also may revise these Terms from time to time. The changes will not be retroactive, and the most current version of the terms will be at FIGURE DIS OUT We will notify Merchants of material revisions via a service notification or an email to the email address associated with your account. By continuing to access or use the Services after those revisions become effective, you agree to be bound by the revised Terms.</li>\n            <li><b>Representations and Warranties; Additional Responsibilities; Warranty Disclaimer.</b>\n              <ol>\n                <li>Each party represents and warrants that it has the full right, power, and authority to enter into and perform its obligations under this Agreement without breaching any obligation to any third party.</li>\n                <li>Each party represents and warrants that it will comply with all applicable laws and regulations in its performance of this Agreement, including without limitation (i) all applicable data protection and privacy laws, and (ii) all applicable laws related to third party intellectual property and other proprietary rights.</li>\n                <li>Merchant further represents, warrants and agrees that (i) it will comply with all applicable laws, rules, standards and regulations relating to licenses, health (including Proposition 65 in California), food packaging and accessory items (including but not limited to foodware, plasticware, and other disposable restaurant supplies), and food safety and sanitation, (ii) it has informed Toppings of any required consumer-facing warnings, charges, opt-in requirements, and instructions associated with Merchant Product(s) and it will inform Toppings of any such warnings, charges, opt-ins, and instructions that become required in the future, (iii) it will disclose common allergens in any Merchants menu items listed on the Toppings Platform, (iv) it will only list menu items or products for sale, product descriptions, and prices on the Toppings Platform,  (v) it will not include any age-restricted products (including but not limited to alcohol and tobacco) in Merchants menus on the Toppings Platform or request delivery of any age-restricted products through the Toppings Platform without first entering into a separate agreement with Toppings memorializing the promotion, sale and delivery of such products in compliance with the laws of the applicable state in which such products will be sold, (vi) it will not disclose any information related to a Topper or a Customer to a third party (except as required to comply with law or pursuant to a court order), (vii) it will comply with the guidelines Toppings publishes that govern any content Merchant posts on the Toppings Platform or Merchant Portal, and  (viii) it will comply with its obligations under Section 4(b)(iii) and 4(b)(iv) of this Agreement.</li>\n                <li>EXCEPT AS EXPRESSLY SET FORTH HEREIN, TO THE EXTENT PERMITTED BY APPLICABLE LAW, TOPPINGS HEREBY EXPRESSLY DISCLAIMS ALL WARRANTIES, EXPRESS, IMPLIED OR STATUTORY, REGARDING THE TOPPINGS PLATFORM, THE DELIVERY API, EQUIPMENT OR SERVICES, INCLUDING BUT NOT LIMITED TO ANY IMPLIED WARRANTIES OF MERCHANTABILITY, TITLE, SATISFACTORY QUALITY OR RESULTS, OR FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. Merchant acknowledges that the operation of the Platform may from time to time encounter technical or other problems and may not necessarily continue uninterrupted or without technical or other errors and Toppings shall not be responsible to Merchant or others for any such interruptions, errors, or problems or an outright discontinuance of the Platform nor for any guarantee of results with respect to the Toppings services or Platform. Both Parties acknowledge that neither party has any expectation or has received any assurances for future business or that any investment by a party will be recovered or recouped or that such party will obtain any anticipated amount of profits by virtue of this Agreement.</li>\n              </ol>\n            </li>\n            <li><b>Indemnification.</b> Each party (the Indemnifying Party) will defend, indemnify, and hold harmless the other party, its subsidiaries and affiliates, and their respective officers, directors, shareholders, employees, and agents (the Indemnified Party) from and against any and all claims, damages, losses and expenses (including reasonable attorneys fees) (collectively Losses) with respect to any third-party claims arising out of or related to: (i) any bodily injury (including death) or damage to tangible or real property to the extent caused by the Indemnifying Partys personnel and, in the case of Toppings, Toppers (or, in the case of Merchant as the Indemnifying Party, caused by the Merchant Products); (ii) any claims that the Indemnifying Party breached its representations, warranties or covenants set forth in Section 11 and Section 12, and Section 15 of this Agreement; (iii) the violation of the intellectual property of the third party by the Indemnifying Partys logos, trademarks, trade names, menus, documentation, or other intellectual property (collectively, Materials); or (iv) in the case of Merchant as the Indemnifying Party, Merchants failure to distribute tips as required by applicable law. In addition, Merchant will defend, indemnify and hold harmless Toppings from any and all Losses related to any violation or alleged violation of any applicable retail food or other health and safety code, rule, or regulation related to Merchant Product(s), except to the extent such Losses were caused directly by the gross negligence or willful misconduct of Toppings. In each case the Indemnified Party shall provide the Indemnifying Party with (a) prompt notice of any claims such that the Indemnifying Party is not prejudiced by any delay of such notification, (b) the option to assume sole control over defense and settlement of any claim, and (c) reasonable assistance in connection with such defense and settlement (at the Indemnifying Partys expense). The Indemnified Party may participate in the defense or settlement of such a claim with counsel of its own choice and at its own expense; however, the Indemnifying Party shall not enter into any settlement agreement that imposes any obligation on the Indemnified Party without the Indemnified Partys express prior written consent. Toppings assumes no liability, and shall have no liability, for any infringement claim pursuant to section 16(iii) above based on Merchants access to and/or use of the Toppings Platform following notice of such an infringement claim; any unauthorized modification of the Toppings Platform by Merchant; or Merchants combination of the Toppings Platform with third party programs, services, data, hardware, or other materials which otherwise would not result in such infringement claim.</li>\n            <li><b>Limitation of Liability. </b>EXCEPT WITH RESPECT TO DAMAGES ARISING FROM VIOLATIONS OF LAW OR WILFUL MISCONDUCT, UNPAID AMOUNTS OWED TO TOPPINGS BY MERCHANT IN EXCESS OF THE BELOW LIMIT, AND AMOUNTS PAYABLE TO THIRD PARTIES UNDER SECTION 16 (INDEMNIFICATION), TO THE EXTENT PERMITTED BY APPLICABLE LAW, (I) NEITHER PARTY WILL BE LIABLE TO THE OTHER UNDER THIS AGREEMENT, FOR INDIRECT, SPECIAL, PUNITIVE, OR CONSEQUENTIAL DAMAGES, OR FOR LOST PROFITS, LOST REVENUES, HARM TO GOODWILL, OR THE COSTS FOR PROCURING REPLACEMENT SERVICES, WHETHER BASED ON TORT, CONTRACT OR ANY OTHER LEGAL THEORY, AND WHETHER OR NOT SUCH PARTY HAS BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES, AND (II) EACH PARTYS MAXIMUM AGGREGATE LIABILITIES RELATED TO OR IN CONNECTION WITH THIS AGREEMENT SHALL NOT EXCEED THE TOTAL AMOUNT PAID OR PAYABLE BY ONE PARTY TO THE OTHER PARTY IN THE TWELVE (12) MONTH PERIOD IMMEDIATELY PRECEDING THE INCIDENT GIVING RISE TO THE LIABILITY. THE FOREGOING DISCLAIMER SHALL NOT APPLY TO THE EXTENT PROHIBITED BY LAW.</li>\n            <li><b>Insurance. </b>During the term of the Agreement and for one year after, each party will maintain adequate insurance in amounts not less than as required by law or that is common practice in such partys business. Upon request, each party will provide the other with current evidence of coverage. Such insurance shall not be cancelled or materially reduced without thirty (30) days prior written notice. In no event shall the limits of any insurance policy be considered as limiting the liability of a party under this Agreement.</li>\n            <li><b>Dispute Resolution.</b> PLEASE READ THE FOLLOWING SECTION CAREFULLY. IT REQUIRES YOU TO ARBITRATE DISPUTES WITH TOPPINGS AND LIMITS THE MANNER IN WHICH YOU CAN SEEK RELIEF. THIS SECTION 19 OF THIS AGREEMENT SHALL BE REFERRED TO AS THE ARBITRATION AGREEMENT.\n              <ol>\n                <li><b>Scope of Arbitration Agreement.</b> Any dispute, controversy or claim arising out of, relating to or in connection with this contract, including the breach, termination or validity thereof, shall be finally resolved by binding arbitration, rather than in court, except that (1) you may assert claims in small claims court if your claims qualify, so long as the matter remains in such court and advances only on an individual (non-class, non-representative) basis; and (2) you or Toppings may seek injunctive relief in court for infringement or other misuse of intellectual property rights (such as trademarks, trade dress, domain names, trade secrets, copyrights, and patents). Toppings and Merchant agree that, because both are business entities that mutually benefit from streamlined and confidential resolution, this Arbitration Agreement shall apply to all disputes arising from or relating to the subject matter of this Agreement or the relationship between the parties and their personnel. In that regard, this Arbitration Agreement shall be binding upon and enforceable by not only the parties, but also their affiliates, and their owners, officers, directors, managers and employees. This Arbitration Agreement shall apply, without limitation, to all claims that arose or were asserted before the Effective Date of this Agreement. CASES HAVE BEEN FILED AGAINST TOPPINGSAND OTHERS MAY BE FILED IN THE FUTURETHAT ATTEMPT TO ASSERT CLASS ACTION CLAIMS, AND BY ACCEPTING THIS ARBITRATION AGREEMENT YOU ELECT NOT TO PARTICIPATE IN SUCH CASES. IF YOU AGREE TO ARBITRATION WITH TOPPINGS, YOU ARE AGREEING IN ADVANCE THAT YOU WILL NOT PARTICIPATE IN OR SEEK TO RECOVER MONETARY OR OTHER RELIEF IN ANY SUCH CLASS, COLLECTIVE, AND/OR REPRESENTATIVE LAWSUIT. INSTEAD, BY AGREEING TO ARBITRATION, YOU MAY BRING YOUR CLAIMS AGAINST TOPPINGS IN AN INDIVIDUAL ARBITRATION PROCEEDING. IF SUCCESSFUL ON SUCH CLAIMS, YOU COULD BE AWARDED MONEY OR OTHER RELIEF BY AN ARBITRATOR.</li>\n                <li><b>Informal Resolution. You and Toppings agree that good-faith informal efforts to resolve disputes often can result in a prompt, low-cost and mutually beneficial outcome. You and Toppings therefore agree that, before either you or Toppings demands arbitration against the other, we will personally meet and confer, via telephone or videoconference, in a good-faith effort to resolve informally any claim covered by this mutual Arbitration Agreement. If you are represented by counsel, your counsel may participate in the conference, but you shall also fully participate in the conference. The party initiating the claim must give notice to the other party in writing of its, his, or her intent to initiate an informal dispute resolution conference, which shall occur within 60 days after the other party receives such notice, unless an extension is mutually agreed upon by the parties. To notify Toppings that you intend to initiate an informal dispute resolution conference, email Merchant.Informal.Resolution@Toppings.com, providing your name, telephone number associated with your Toppings account (if any), the email address associated with your Toppings account, and a description of your claim. In the interval between the party receiving such notice and the informal dispute resolution conference, the parties shall be free to attempt to resolve the initiating partys claims. Engaging in an informal dispute resolution conference is a requirement that must be fulfilled before commencing arbitration.  The statute of limitations and any filing fee deadlines shall be tolled while the parties engage in the informal dispute resolution process required by this paragraph.</b></li>\n                <li><b>Arbitration Rules and Forum.</b> This Arbitration Agreement is governed by the Federal Arbitration Act in all respects. If for whatever reason the rules and procedures of the Federal Arbitration Act cannot apply, the state law governing arbitration agreements in the state in which you reside shall apply. Before a party may begin an arbitration proceeding, that party must send notice of an intent to initiate arbitration and certifying completion of the informal dispute resolution conference pursuant to paragraph 19(2). If this notice is being sent to Toppings, it must be sent by email to the counsel who represented Toppings in the informal dispute resolution process, or if there was no such counsel then by mail to General Counsel, at 5190 Ivy Nole Cumming, GA 30040. The arbitration will be conducted by JAMS under its rules and pursuant to the terms of this Agreement, but in the event of a conflict between the two, the provisions of this Arbitration Agreement shall supersede any and all conflicting arbitration administrators rules or procedures. Arbitration demands filed with JAMS must include (1) the name, telephone number, mailing address, and e-mail address of the party seeking arbitration; (2) a statement of the legal claims being asserted and the factual bases of those claims; (3) a description of the remedy sought and an accurate, good-faith calculation of the amount in controversy, enumerated in United States Dollars (any request for injunctive relief or attorneys fees shall not count toward the calculation of the amount in controversy unless such injunctive relief seeks the payment of money); and (4) the signature of the party seeking arbitration. Disputes involving claims and counterclaims under $250,000, not inclusive of attorneys fees and interest, shall be subject to JAMSs most current version of the Streamlined Arbitration Rules and procedures available at http://www.jamsadr.com/rules-streamlined-arbitration/; all other claims shall be subject to JAMSs most current version of the Comprehensive Arbitration Rules and Procedures, available at http://www.jamsadr.com/rules-comprehensive-arbitration/. JAMSs rules are also available at www.jamsadr.com (under the Rules/Clauses tab) or by calling JAMS at 800-352-5267. Payment of all filing, administration, and arbitration fees will be governed by JAMSs rules. If JAMS is not available to arbitrate, the parties will select an alternative arbitral forum. You may choose to have the arbitration conducted by telephone, video conference, or in person in the country where you live or at another mutually agreed location.</li>\n                <li><b>Arbitrator Powers.</b> The arbitrator, and not any federal, state, or local court or agency, shall have exclusive authority to resolve any dispute relating to the interpretation, applicability, enforceability or formation of this Arbitration Agreement including, but not limited to any claim that all or any part of this Arbitration Agreement is void or voidable. All disputes regarding the payment of arbitrator or arbitration-organization fees including the timing of such payments and remedies for nonpayment, shall be determined exclusively by an arbitrator, and not by any court. The arbitration will decide the rights and liabilities, if any, of you and Toppings. The arbitration proceeding will not be consolidated with any other matters or joined with any other proceedings or parties. The arbitrator will have the authority to grant motions dispositive of all or part of any claim or dispute. The arbitrator will have the authority to award monetary damages and to grant any non-monetary remedy or relief available to an individual under applicable law, the arbitral forums rules, and this Agreement (including this Arbitration Agreement). The arbitrator will issue a written statement of decision describing the essential findings and conclusions on which any award (or decision not to render an award) is based, including the calculation of any damages awarded. The arbitrator shall follow the applicable law. The arbitrator has the same authority to award relief on an individual basis that a judge in a court of law would have. The arbitrators decision is final and binding on you and Toppings.</li>\n                <li><b>Waiver of Jury Trial.</b>YOU AND TOPPINGS WAIVE ANY CONSTITUTIONAL AND STATUTORY RIGHTS TO SUE IN COURT AND RECEIVE A JUDGE OR JURY TRIAL. You and Toppings are instead electing to have claims and disputes resolved by arbitration, except as specified in Section 19(1) above. There is no judge or jury in arbitration, and court review of an arbitration award is limited.</li>\n                <li><b>Waiver of Class or Consolidated Actions; Severability.</b> YOU AND TOPPINGS AGREE TO WAIVE ANY RIGHT TO RESOLVE CLAIMS WITHIN THE SCOPE OF THIS ARBITRATION AGREEMENT ON A CLASS, COLLECTIVE, OR REPRESENTATIVE BASIS. ALL CLAIMS AND DISPUTES WITHIN THE SCOPE OF THIS ARBITRATION AGREEMENT MUST BE ARBITRATED ON AN INDIVIDUAL BASIS AND NOT ON A CLASS BASIS. CLAIMS OF MORE THAN ONE MERCHANT CANNOT BE ARBITRATED OR LITIGATED JOINTLY OR CONSOLIDATED WITH THOSE OF ANY OTHER CUSTOMER OR USER. If, however, this waiver of class or consolidated actions is deemed invalid or unenforceable with respect to a particular claim or dispute, neither you nor Toppings is entitled to arbitration of such claim or dispute. Instead, all such claims and disputes will then be resolved in a court as set forth in Section 20, and all other provisions of this Section 19 (Dispute Resolution) shall remain in force. If any provision of this Section 19 is adjudged to be void or otherwise unenforceable, in whole or in part, the void or unenforceable provision shall be severed and such adjudication shall not affect the validity of the remainder of this Section 19. Nothing in this provision shall prevent you or Toppings from participating in a class-wide settlement of claims.</li>\n                <li><b>Opt Out.</b> Toppingss updates to these Terms of Service do not provide a new opportunity to opt out of the Arbitration Agreement if you had previously agreed to a version of Toppingss Terms of Service and did not validly opt out of arbitration. Toppings will continue to honor the valid opt outs of merchants who validly opted out of the Arbitration Agreement in a prior version of the Terms of Service. If you create a Toppings account for the first time on or after December 9, 2020, you may opt out of this Arbitration Agreement. If you do so, neither you nor Toppings can force the other to arbitrate as a result of this Agreement. To opt out, you must notify Toppings in writing of your intention to opt out by sending a letter, by First Class Mail, to Toppings, Inc., 5190 Ivy Nole Cumming GA 30040. Any attempt to opt out by email will be ineffective. To be effective, your opt-out notice must be postmarked no later than 30 days after your first order on the Platform. Your notice must include your name and address, your Toppings username (if any), the email address you used to set up your Toppings account (if you have one), and a CLEAR statement that you want to opt out of this Arbitration Agreement. The letter may opt out, at most, only one merchant, and letters that purport to opt out multiple merchants will not be effective as to any. No merchant (or his or her agent or representative) may effectuate an opt out on behalf of other persons. If you opt out of this Arbitration Agreement, all other parts of this Agreement will continue to apply to you. Opting out of this Arbitration Agreement has no effect on any other arbitration agreements that you may have entered into with us or may enter into in the future with us.</li>\n                <li><b>Survival. This Arbitration Agreement will survive any termination of your relationship with Toppings.</b></li>\n                <li><b>Modification. Notwithstanding any provision in the Agreement to the contrary, we agree that if Toppings makes any future material change to this Arbitration Agreement, it will not apply to any individual claim(s) that you had already provided notice of to the Company.</b></li>\n              </ol>\n            </li>\n            <li><b>Litigation Class Action Waiver. To the extent allowed by applicable law, separate and apart from the Mutual Arbitration Provision found in Section 19, Merchant agrees that any proceeding to litigate in court any dispute arising out of or relating to this Agreement, whether because Merchant opted out of the Arbitration Provision or any other reason, will be conducted solely on an individual basis, and Merchant agrees not to seek to have any controversy, claim or dispute heard as a class action, a representative action, a collective action, a private attorney-general action, or in any proceeding in which Merchant acts or proposes to act in a representative capacity (Litigation Class Action Waiver). Merchant further agrees that no proceeding will be joined, consolidated, or combined with another proceeding, without the prior written consent of all parties to any such proceeding. If a court of competent jurisdiction determines that all or part of this Litigation Class Action Waiver is unenforceable, unconscionable, void or voidable, the remainder of this Agreement shall remain in full force and effect.</b></li>\n            <li><b>Franchisees.</b>Franchisees operating a branded restaurant or store concept licensed by Merchant may participate in the Program pursuant to the terms and conditions of this Agreement provided that the individual franchisee: (1) is in compliance with its franchise agreement; and (2) enters into an agreement in substantially the same form as the Supplemental Agreement provided by Toppings to the Franchisee. Unless the parties mutually agree otherwise in writing, all Merchant owned branded restaurant(s) and store concept(s) shall be included and subject to the terms hereunder.</li>\n            <li><b>Communications from Toppings.</b> Merchant agrees to accept and receive communications from Toppings or Toppers, including via email, text message, calls, and push notifications to the cellular telephone number Merchant provides to Toppings. Merchant acknowledges that Merchant may receive communications generated by automatic telephone dialing systems and/or which will deliver prerecorded messages sent by or on behalf of Toppings, its affiliated companies and/or Toppers. Merchant may opt out of such communications in Merchants Account Settings or by replying STOP from the mobile device receiving such messages.</li>\n            <li><b>Attorneys Fees.</b> In any legal action to enforce the terms of this Agreement, the prevailing party in such action shall be entitled to recover its reasonable attorneys fees and costs from the other party.</li>\n            <li><b>General Provisions.</b> As set forth on the Sign-Up Sheet between Merchant and Toppings, the Sign-Up Sheet and these Terms constitute an integrated Agreement between the parties, which supersedes all prior agreements and communications of the parties, oral or written, with respect to the subject matter hereof. The rights and obligations set forth in these Terms, which by their nature should, or by their express terms do, survive or extend beyond the termination or expiration of these Terms shall so survive and extend. This Agreement is governed by and interpreted in accordance with the laws of the State of Delaware without regard to the conflicts of laws principles thereof. Merchant agrees that, except as set forth above in Section 19 (Dispute Resolution), the parties hereby consent to exclusive jurisdiction in the courts of the Merchants location. Merchant may not assign this Agreement in whole or in part without Toppingss prior written consent. Toppings may freely assign this Agreement. This Agreement is binding upon, and inures to the benefit of, the employees, representatives, agents, affiliates, franchisors, franchisees, and permitted successors and assigns of each party, but shall not confer any rights or remedies upon any third party. All notices, requests, consents and other communications under the Parties' agreements must be in writing, and delivered by overnight courier to the addresses set forth on the Sign-Up Sheet (or any updated address properly noticed hereunder). Toppingss address is 5190 Ivy Nole, Cumming, GA 30040. If any provision of this Agreement is held to be invalid, illegal or unenforceable for any reason, such invalidity, illegality or unenforceability will not affect any other provisions of this Agreement, and this Agreement will be construed as if such invalid, illegal or unenforceable provision had never been contained here.</li>\n          </ol>\n        </div>\n\n        {/*<button>Export as PDF</button>*/}\n      </div>\n    </article>\n  );\n}\n\nexport default PortalTermsService;\n","import React, { useState, useEffect, useRef } from 'react';\n\nfunction RadioButton(props) {\n  return (\n    <div className=\"radio-button\">\n      <div className={props.currentChoice == props.options[0] ? \"radio-button-option active\" : \"radio-button-option\"} onClick={() => props.setChoice(props.options[0])}>{props.options[0]}</div>\n      <div className={props.currentChoice == props.options[1] ? \"radio-button-option active\" : \"radio-button-option\"} onClick={() => props.setChoice(props.options[1])}>{props.options[1]}</div>\n    </div>\n  );\n}\n\nexport default RadioButton;","export default __webpack_public_path__ + \"static/media/portal-menu-plus-button.c31ac20a.svg\";","export default __webpack_public_path__ + \"static/media/portal-menu-x-button.175a158d.svg\";","import React, { useState, useEffect, useRef } from 'react';\n\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\n\nimport awsConfig from '../utils/awsConfig';\nimport * as queries from '../graphql/queries';\nimport * as customQueries from '../graphql/customQueries';\nimport * as customMutations from '../graphql/customMutations';\nimport * as mutations from '../graphql/mutations';\n\nimport RadioButton from '../components/RadioButton';\nimport bubbleIcon from '../assets/images/bubble-icon-1.svg';\nimport loadingBubbleIcon from '../assets/images/bubble-icon-1.svg';\nimport plusButtonIcon from '../assets/images/portal-menu-plus-button.svg';\nimport xButtonIcon from '../assets/images/portal-menu-x-button.svg';\n\nimport { gql, useMutation } from '@apollo/client';\n\nfunction PortalMenu(props) {\n  const defaultMenuItem = {\n    name: \"Krabby Patty\",\n    price: 2.99,\n    description: \"The signature of the Krusty Krab, a juicy burger with secret ingredients.\",\n    options: { items: [] }\n  };\n  let restaurantSk = props.vendor.getVendor.restaurant.sk;\n  let restaurantId = restaurantSk.slice(restaurantSk.lastIndexOf(\"#\")+1)\n  console.log(\"chop chop\", restaurantId);\n\n  const categoryNameInput = useRef();\n  const itemNameInput = useRef();\n  const itemPriceInput = useRef();\n  const itemDescriptionInput = useRef();\n  const itemTagsInput = useRef();\n  const itemImageInput = useRef();\n  //const restaurantId = props.vendorData.slice(props.vendorData.lastIndexOf('#')+1);\n  \n  \n  const [loading, setLoading] = useState(false);\n  const [mode, changeMode] = useState(\"\");\n  const [toppingPopup, setToppingPopup] = useState(false);\n  const [addItemType, setAddItemType] = useState(\"Regular\");\n  const [selectedTopping, setSelectedTopping] = useState([]);\n  const [lastSelectedTopping, setLastSelectedTopping] = useState([]);\n  const [selectedMenuItem, setSelectedMenuItem] = useState(defaultMenuItem);\n  const [selectedMenuItemToppings, setSelectedMenuItemToppings] = useState([]);\n  const [selectedMenuItemOptions, setSelectedMenuItemOptions] = useState([]);\n  const [selectedMenuItemExistingToppings, setSelectedMenuItemExistingToppings] = useState([]);\n  const [existingToppings, setExistingToppings] = useState([]);\n  const [removableToppings, setRemoveableToppings] = useState([]);\n  const [removableOptions, setRemoveableOptions] = useState([]);\n  const [selectedCategory, setSelectedCategory] = useState(null);\n  const [hasMenu, setHasMenu] = useState(false);\n  const [toppingOptions, setToppingOptions] = useState([]);\n  const [toppingCategories, setToppingCategories] = useState([]);\n  // const [menuItems, setMenuItems] = useState({\n  //   Appetizers: [{id: 1, name: \"Golden Loaf\", price: \"2.50\", description: \"A loaf that is golden.\"}, \n  //                  {id: 2, name: \"Fried Oyster Skins\", price: \"0.99\", description: \"Oyster skins that are fried.\"}],\n  //   Entrees: [{id: 3, name: \"Krabby Patty\", price: \"2.99\", description: \"The signature of the Krusty Krab, a juicy burger with secret ingredients.\"}, \n  //               {id: 4, name: \"Jelly Patty\", price: \"3.99\", description: \"A Krabby Patty with jellyfish jelly.\"}],\n  //   Desserts: [{id: 5, name: \"Seanut Brittle\", price: \"2.43\", description: \"Hard sugar candy pieces with seanuts inside.\"}]\n  // });\n  const [menuItems, setMenuItems] = useState({});\n  const [menuCategoriesList, setMenuCategoriesList] = useState({});\n  const [toppings, setToppings] = useState({});\n  const [toppingCategoryName, setToppingCategoryName] = useState();\n  \n  const [updateRestaurant, {data: restaurantData, error: mutationError, loading: mutationLoading }] = useMutation(customMutations.updateRestaurant);\n\n  useEffect(() => {\n    getData();\n  }, []);\n  \n  console.log(\"props\", props);\n  function getData() {\n    setLoading(true);\n    //replace with smth to do with get menu\n    // const response = await API.graphql(graphqlOperation(customQueries.listMenuCategories, { filter: { menuId: { eq: restaurantId }}}));\n    // const menuCategoriesList = response.data.listMenuCategorys.items;\n    // menuCategoriesList.forEach(category => {\n    //   setMenuItems(oldMenuItems => ({\n    //     ...oldMenuItems,\n    //     [category.name]: category.menuItems.items,\n    //   }));\n    // });\n    \n    const categories = props.vendor.getVendor.restaurant.menu;\n    setMenuCategoriesList(categories);\n\n    console.log(props.vendor.getVendor.restaurant.menu);\n    console.log(\"menucategories\", menuCategoriesList);\n    Array.from(categories).forEach(category => {\n      setMenuItems(oldMenuItems => ({\n        ...oldMenuItems,\n        [category.name]: category.menuItems,\n      }));\n    });\n    console.log(\"menu items\", menuItems);\n    console.log(\"default\", defaultMenuItem);\n    setHasMenu(true);\n    setLoading(false);\n  }\n\n  function toggleToppingPopup() {\n    setToppingPopup(!toppingPopup);\n  }\n  function addCategory(e) {\n    console.log(\"add category\", categoryNameInput.current.value);\n    e.preventDefault();\n    \n    let categoryClone = JSON.parse(JSON.stringify(menuCategoriesList));\n    categoryClone = [\n      ...menuCategoriesList,\n      {\n        name: categoryNameInput.current.value,\n        menuItems: [],\n        __typename: \"MenuCategory\",\n      }\n    ]\n\n    setMenuCategoriesList(categoryClone);\n    console.log(\"category clone\", categoryClone)\n    \n    changeMode(\"\")\n  }\n\n  async function createToppings(menuItem) {\n    // const existingToppingCategoriesResponse = await API.graphqlOperation(queries.listFoodOptions, { filter: { menuId: { eq: restaurantId }}});\n    // const existingToppingCategories = existingToppingCategoriesResponse.data.listFoodOptions.items;\n    console.log(\"D\", menuItem);\n    const createToppingsInput = {\n      id: restaurantId,\n      selectedMenuItemToppings: JSON.stringify(selectedMenuItemToppings),\n      selectedMenuItemOptions: JSON.stringify(selectedMenuItemOptions),\n      selectedMenuItemExistingToppings: JSON.stringify(selectedMenuItemExistingToppings),\n      menuItem: JSON.stringify(menuItem),\n    };\n\n    console.log(\"selected options\", selectedMenuItemOptions);\n    console.log(\"selected existing\", selectedMenuItemExistingToppings);\n    console.log(\"selected toppings\", selectedMenuItemToppings);\n    await API.graphql(graphqlOperation(customMutations.createToppings, createToppingsInput));\n    // await Promise.all(selectedMenuItemToppings.map(async topping => {\n    //   const toppingCategory = {\n    //     menuId: restaurantId,\n    //     name: topping.foodOptionName\n    //   };\n    //   // console.log(\"TP\", topping)\n      \n    //   const toppingCategoryResponse = await API.graphql(graphqlOperation(mutations.createFoodOption, { input: toppingCategory }));\n    //   console.log(\"Creating Category\", toppingCategoryResponse);\n    // }));\n\n    // await Promise.all(selectedMenuItemOptions.map(async option => {\n    //   const toppingOption = {\n    //     menuId: restaurantId,\n    //     name: option.optionName,\n    //   };\n\n    //   const toppingOptionResponse = await API.graphql(graphqlOperation(mutations.createOption, { input: toppingOption }));\n    //   console.log(\"Creating Option\", toppingOptionResponse);\n    // }));\n    \n    // await Promise.all(selectedMenuItemToppings.concat(selectedMenuItemExistingToppings).map(async topping => {\n    //   const toppingCategoryJoiner = {\n    //     menuId: restaurantId,\n    //     foodOptionName: topping.foodOptionName,\n    //     menuItemName: menuItem.name,\n    //     numchoices: topping.numchoices,\n    //   };\n    //   console.log(toppingCategoryJoiner);\n\n    //   const toppingCategoryJoinerResponse = await API.graphql(graphqlOperation(mutations.createItemOptionCatJoin, { input: toppingCategoryJoiner }));\n    //   console.log(\"Creating Category Joiner\", toppingCategoryJoinerResponse);\n    // }));\n    \n    // await Promise.all(selectedMenuItemOptions.map(async option => {\n    //   console.log(\"Making Options!!!\")\n    //   const toppingOptionJoiner = {\n    //     menuId: restaurantId,\n    //     foodOptionName: option.foodOptionName,\n    //     optionName: option.optionName,\n    //   };\n\n    //   const toppingOptionJoinerResponse = await API.graphql(graphqlOperation(mutations.createItemOptionOptionJoin, { input: toppingOptionJoiner }));\n    //   console.log(\"Creating Option Joiner\", toppingOptionJoinerResponse);\n    // }));\n\n    setSelectedMenuItemToppings([]);\n    setSelectedMenuItemOptions([]);\n    setSelectedMenuItemExistingToppings([]);\n  }\n\n  async function addItem(e) {\n    e.preventDefault();\n\n    const categoryListClone = JSON.parse(JSON.stringify(menuCategoriesList));\n    const selectedCategoryIndex = menuCategoriesList.findIndex(category => category === selectedCategory);\n    const itemsInput = [\n      ...selectedCategory.menuItems,\n      {\n        __typename: 'MenuItem',\n        name: itemNameInput.current.value,\n        description: itemDescriptionInput.current.value,\n        price: parseFloat(itemPriceInput.current.value).toFixed(2) * 100,\n        foodOptions: [],\n      },    \n    ]\n    categoryListClone[selectedCategoryIndex].menuItems = itemsInput;\n    setMenuCategoriesList(categoryListClone);\n    console.log(\"category list clone\", categoryListClone);\n    \n    const updatedRestaurant = {\n      id: restaurantId,\n      input: { \n        menu: JSON.stringify(categoryListClone),\n      },\n    };\n\n    const updateRestaurantResponse = await updateRestaurant({variables: updatedRestaurant});\n\n    console.log(\"props\", props);\n    console.log(\"mutation response\", updateRestaurantResponse);\n    setMenuItems({});\n    getData();\n    changeMode(\"\");\n    setSelectedMenuItem(defaultMenuItem);\n  }\n\n  async function editItem(e) {\n    e.preventDefault();\n    console.log(\"sleepy\", toppings);\n    // if (selectedTopping !== []) {\n    //   toppings[lastSelectedTopping.name] = selectedTopping;\n    // }\n    delete toppings[undefined];\n\n    const arrayToppings = Object.keys(toppings).map(function(key) {\n      return ({\n        __typename: 'FoodOptions',\n        name: key,\n        numChoices: toppings[key].numChoices,\n        options: toppings[key].options,\n      })\n    })\n    console.log(\"idk dude\", arrayToppings);\n\n    const categoryListClone = JSON.parse(JSON.stringify(menuCategoriesList));\n    const selectedCategoryIndex = menuCategoriesList.findIndex(category => category === selectedCategory);\n    const selectedItemIndex = menuCategoriesList[selectedCategoryIndex].menuItems.findIndex(item => item === selectedMenuItem);\n\n    categoryListClone[selectedCategoryIndex].menuItems[selectedItemIndex] = {\n      __typeName: 'MenuItem',\n      name: itemNameInput.current.value,\n      description: itemDescriptionInput.current.value,\n      price: parseFloat(itemPriceInput.current.value).toFixed(2) * 100,\n      points: null,\n      foodOptions: arrayToppings,\n    }\n    console.log(\"more specific\", categoryListClone[selectedCategoryIndex].menuItems[selectedItemIndex])\n    console.log(\"restaurant input\", categoryListClone);\n\n    const updatedRestaurant = {\n      id: restaurantId,\n      input: { \n        menu: JSON.stringify(categoryListClone),\n      },\n    };\n\n    const updateRestaurantResponse = await updateRestaurant({variables: updatedRestaurant});\n    console.log(\"mutation response\", updateRestaurantResponse);\n\n    setMenuItems({});\n    getData();\n    changeMode(\"\");\n    setToppings({});\n    setSelectedMenuItem(defaultMenuItem);\n  }\n  \n  async function deleteItem(e) {\n    e.preventDefault();\n    \n    const categoryListClone = JSON.parse(JSON.stringify(menuCategoriesList));\n    const selectedCategoryIndex = menuCategoriesList.findIndex(category => category === selectedCategory);\n    let itemsInput = [\n      ...selectedCategory.menuItems,    \n    ]\n    itemsInput = itemsInput.filter(item => item != selectedMenuItem);\n\n    categoryListClone[selectedCategoryIndex].menuItems = itemsInput;\n    setMenuCategoriesList(categoryListClone);\n    console.log(\"category list clone\", categoryListClone);\n    \n    const updatedRestaurant = {\n      id: restaurantId,\n      input: { \n        menu: JSON.stringify(categoryListClone),\n      },\n    };\n\n    console.log(\"additem\", updatedRestaurant)\n    const updateRestaurantResponse = await updateRestaurant({variables: updatedRestaurant});\n\n    setToppings({});\n  }\n\n  function addOption() {\n    let toppingCopy = JSON.parse(JSON.stringify(selectedTopping));\n    toppingCopy.options = [\n      ...toppingCopy.options,\n      {\n        __typename: 'Option',\n        name: '',\n        price: null,\n        points: null,\n      },\n    ]\n    setSelectedTopping(toppingCopy);\n    setToppingOptions(toppingCopy.options);\n    console.log(\"add option\", toppingCopy);\n  }\n\n  function addToppings() {\n    const itemClone = JSON.parse(JSON.stringify(selectedMenuItem));\n    console.log(\"itemcopy\", itemClone)\n    itemClone.foodOptions = [\n      ...selectedMenuItem.foodOptions,\n      {\n        name: toppingCategoryName,\n        options: [],\n        __typename: \"FoodOption\",\n      }\n    ]\n    toppings[toppingCategoryName] = \n    {\n      name: toppingCategoryName,\n      options: [],\n      __typename: \"FoodOption\",\n    };\n    setSelectedMenuItem(itemClone);\n    setToppingCategories(itemClone.foodOptions);\n    console.log(\"add category\", itemClone);\n\n    toggleToppingPopup();\n  }\n  \n  function deleteToppings() {\n    //bookmark\n    //.filter is not a function, .findIndex is not a function, can't fully delete toppings[selectedTopping.name] \n    // const itemClone = JSON.parse(JSON.stringify(selectedMenuItem));\n    // itemClone.foodOptions = itemClone.foodOptions.filter((cat) => cat.name !== selectedTopping.name);\n    // console.log(\"delete toppings\", itemClone);\n\n    // const toppingsClone = JSON.parse(JSON.stringify(toppings))\n    \n    // delete toppings[selectedTopping.name];\n    // setSelectedTopping([])\n    // setSelectedMenuItem(itemClone);\n    // setToppingOptions([])\n    // console.log(\"ugh\", toppings);\n  }\n\n  async function addExistingToppings() {\n    //change to some sort of get menu\n    const existingToppingCategoriesResponse = await API.graphql(graphqlOperation(queries.listFoodOptions, { filter: { menuId: { eq: restaurantId }}}));\n    const existingToppingCategories = existingToppingCategoriesResponse.data.listFoodOptions.items;\n    setExistingToppings(existingToppingCategories);\n\n    const option = {\n      foodOptionName: \"Old Topping\", \n      menuId: restaurantId, \n      optionName: \"Old Option\",\n      option: { price: null, name: \"Old Option\", menuId: restaurantId }\n    };\n\n    const topping = {\n      foodOptionName: \"Old Topping\",\n      menuId: restaurantId,\n      menuItemName: selectedMenuItem.name,\n      numchoices: 1,\n      optionCat: {\n        menuId: restaurantId,\n        name: \"Old Topping\",\n        options: {\n          items: [option]\n        }\n      },\n      existing: true,\n    };\n\n    setSelectedMenuItemExistingToppings([...selectedMenuItemExistingToppings, topping]);\n    console.log(\"E\", selectedMenuItemExistingToppings);\n  }\n\n  function editToppingName(e, topping) {\n    let toppingsClone = Object.assign({}, toppings);\n    // toppingsClone[e.target.value] = toppingsClone[topping.name];\n    console.log(\"toppings Clone\", topping.name);\n\n    topping.name = e.target.value;\n  }\n\n  function editExistingTopping(e, topping) {\n    topping.foodOptionName = e.target.value;\n    topping.optionCat.name = e.target.value;\n    topping.options.forEach(option => option.foodOptionName = e.target.value);\n    setSelectedMenuItemExistingToppings([...selectedMenuItemExistingToppings]);\n    console.log(\"ETPS\", selectedMenuItemExistingToppings);\n    console.log(\"SMIET\", selectedMenuItem);\n  }\n\n  function editOption(e, index) {\n    let toppingClone = JSON.parse(JSON.stringify(selectedTopping))\n    toppingClone.options[index].name = e.target.value;\n    console.log(\"edit option\", toppingClone);\n    setSelectedTopping(toppingClone);\n  }\n  function deleteOption(index) {\n    let toppingCopy = JSON.parse(JSON.stringify(selectedTopping));\n    console.log(\"copy\", toppingCopy.options[index].name, toppingCopy);\n\n    toppingCopy.options = toppingCopy.options.filter((opt) => opt.name !== toppingCopy.options[index].name,);\n    setSelectedTopping(toppingCopy);\n    setToppingOptions(toppingCopy.options);\n    console.log(\"delete option\", toppingCopy);\n  }\n\n  function deleteTopping(topping) {\n    const toppings = selectedMenuItemToppings.filter(t => t.foodOptionName != topping.foodOptionName);\n    setSelectedMenuItemToppings(toppings);\n    selectedMenuItem.foodOptions = selectedMenuItem.foodOptions.filter(t => t.foodOptionName != topping.foodOptionName);\n    console.log(\"DTPS\", selectedMenuItemToppings, toppings);\n    console.log(\"DSMIT\", selectedMenuItem);\n  }\n\n  function handleSelectTopping(event) {\n    console.log(\"handle select topping\");\n    if (lastSelectedTopping !== []) {\n      toppings[lastSelectedTopping.name] = selectedTopping\n      console.log(\"global array change\", selectedTopping)\n    };\n    setSelectedTopping(toppings[event.target.value]);\n    setToppingOptions(toppings[event.target.value].options);\n    \n    setLastSelectedTopping(toppings[event.target.value]);\n  }\n\n  function prepareEdit() {\n    let a = {}\n    const categoryNames = selectedMenuItem.foodOptions.map((foodOption)=>foodOption.name);\n    categoryNames.forEach((categoryName) => {\n      a[categoryName] = selectedMenuItem.foodOptions.find((item)=> item.name === categoryName)\n    })\n    console.log(\"toppings\", a);\n    setToppingCategories(selectedMenuItem.foodOptions);\n    setToppings(a);\n  }\n\n  useEffect(() => {\n    console.log(\"select item\", selectedMenuItem)\n  }, [selectedMenuItem]);\n  useEffect(() => {\n    console.log(\"select topping\", selectedTopping)\n  }, [selectedTopping]);\n\n  console.log(\"render\", menuItems, selectedTopping)\n  return (\n    <article className=\"portal-menu-container\">\n    {loading ? \n      <div>\n        <header>\n          <img className=\"portal-empty-image\" src={loadingBubbleIcon} />\n          <span className=\"subheading\">Loading...</span>\n        </header>\n      </div>  \n    :\n      <div>\n        {mode == \"addItem\" || mode == \"editItem\" ?\n          <div className=\"portal-menu-item-form-container\">\n            <header>\n              <span className=\"orange-heading\">New Menu Item</span>\n            </header>\n\n            <div className=\"content\">\n              <form className=\"portal-menu-item-form\">\n                <div className=\"portal-menu-item-form-type-section\">\n                  {mode == \"editItem\" ? \n                    <div>\n                      <span className=\"subheading\">Item Type</span>\n                      <RadioButton options={[\"Regular\", \"Customizable\"]} currentChoice={addItemType} setChoice={setAddItemType}/>\n                    </div>\n                  : \"\"}\n                </div>\n                \n                <div className=\"portal-menu-item-form-name-section\">\n                  <span className=\"subheading\">Item Name</span>\n                  <input className=\"text-input\" type=\"text\" placeholder=\"Enter Your Item Name\" ref={itemNameInput} defaultValue={mode == \"editItem\" ? selectedMenuItem.name : \"\"} />\n                </div>\n                \n                <div className=\"portal-menu-item-form-price-section\">\n                  <span className=\"subheading\">Item Price ($)</span>\n                  <input id=\"menu-item-price-input\" className=\"text-input\" type=\"text\" placeholder=\"Enter Your Item Price\" ref={itemPriceInput} defaultValue={mode == \"editItem\" ? (((selectedMenuItem.price)/100).toFixed(2)) : \"\"} />\n                </div>\n                \n                <div className=\"portal-menu-item-form-description-section\">\n                  <span className=\"subheading\">Item Description</span>\n                  <textarea className=\"text-input\" type=\"text\" placeholder=\"Enter Your Item Description\" ref={itemDescriptionInput} defaultValue={mode == \"editItem\" ? selectedMenuItem.description : \"\"} />\n                </div>\n                \n                {/*<div className=\"portal-menu-item-form-tags-section\">\n                  <span className=\"subheading\">Item Tags</span>\n                  <input className=\"text-input\" type=\"text\" placeholder=\"Seafood\" ref={itemTagsInput} />\n                </div>\n                \n                <div className=\"portal-menu-item-form-image-section\">\n                  <span className=\"subheading\">Upload Image</span>\n                  <div className=\"image-input-wrapper\">\n                    <label htmlFor=\"portal-menu-item-form-image-input\" className=\"image-upload\">Upload an Image</label>\n                    <input id=\"portal-menu-item-form-image-input\" className=\"image-input\" type=\"file\" ref={itemImageInput} hidden />\n                  </div>\n                </div>*/}\n\n                {mode == \"editItem\" && addItemType == \"Customizable\"  ? \n                  <div className=\"portal-menu-item-form-toppings-section\">\n                    <div className=\"portal-menu-item-form-toppings-container\">\n                      <div>\n                        <span className=\"subheading\">Topping Categories</span>\n                        <select name=\"topping-categories\" className=\"dropdown-input\" style={{width: \"30%\"}}id=\"topping-category\" onChange={(e) => handleSelectTopping(e)}>\n                          <option value=\"none\" selected disabled hidden> Select an Option </option>\n                          {(selectedMenuItem.foodOptions || []).map((topping =>\n                            <option key={topping.name} value={topping.name}>{topping.name}</option>\n                          ))}\n                        </select>\n                        <button className=\"red-x\" type=\"button\" onClick={() => deleteToppings()}><img src={xButtonIcon} /></button>\n                        <span className=\"subheading\">Toppings Options</span>\n                        {\n                        (toppingOptions || []).map(((option, index) => \n                            <div key={option.name} className=\"portal-menu-item-form-toppings-options-input-container\">\n                              <input className=\"text-input\" style={{width: \"30%\"}} type=\"text\" placeholder=\"Enter Option\" onChange={(e) => editOption(e, index)} defaultValue={option.name}/>\n                              <button className=\"red-x\" type=\"button\" onClick={() => deleteOption(index)}><img src={xButtonIcon} /></button>\n                            </div>\n                          ))}\n                          <button id=\"add-category-button\" className=\"blue-text\" type=\"button\" onClick={addOption}><span>+</span> Add New Topping Option</button><br />\n                      </div>\n                    </div>\n                  </div>\n                : \"\"}\n                {mode == \"editItem\" && addItemType == \"Customizable\"  ? \n                <div>\n                  <div>\n                    <button id=\"add-category-button\" className=\"blue-text\" type=\"button\" onClick={() => toggleToppingPopup()}><span>+</span> Add New Category</button><br />\n                    {/*<button id=\"add-category-button\" className=\"blue-text\" type=\"button\" onClick={addExistingToppings}><span>+</span> Add Existing Category</button>*/}\n                  </div>\n                  <div>\n                    {toppingPopup ?\n                      <div className=\"portal-category-form-container\">\n                        <button className=\"close\" onClick={() => toggleToppingPopup()}>&#10005;</button>\n                        <span className=\"subheading\">Topping Category Name</span>\n                        <form className=\"portal-category-form\">\n                            <input className=\"text-input\" type=\"text\" placeholder=\"Enter Category Name\" value={toppingCategoryName} onChange={(e) => setToppingCategoryName(e.target.value)} />\n                            <button onClick={addToppings}>Create Category</button>\n                        </form>\n                      </div>\n                    : \"\"}\n                  </div>\n                </div>\n                : \"\"}\n              </form>\n              \n              <div className=\"portal-menu-item-form-submit-section\">\n                <div>\n                  {mode == \"editItem\" ? \n                    <button className=\"red-text\" onClick={deleteItem}>Delete</button>\n                  : \"\"}\n                </div>\n                <div>\n                  <button className=\"orange-text\" onClick={() => {changeMode(\"\"); setSelectedMenuItemToppings([]); setSelectedMenuItemOptions([]); setSelectedMenuItemExistingToppings([]); setSelectedMenuItem(defaultMenuItem); setSelectedCategory([]); setToppings({}); getData();}}>Cancel</button>\n                  <button className=\"orange\" onClick={mode == \"addItem\" ? addItem : editItem}>{mode == \"addItem\" ? \"Add\" : \"Save\"} Menu Item</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        : Object.keys(menuItems).length > 0 ? \n          <div className=\"portal-menu-list-container\">\n            <header>\n              <span className=\"orange-heading\">Your Menu</span>\n            </header>\n\n            <div className=\"content\">\n              <div className=\"portal-menu-list\">\n                {menuCategoriesList.map((category =>\n                  <div key={category.name} className=\"menu-category-container\">\n                    <span className=\"blue-heading\"><span>{category.name}</span><span><button className=\"blue-plus\" onClick={() => {setSelectedCategory(category); setSelectedMenuItem(defaultMenuItem); changeMode(\"addItem\")}}><img src={plusButtonIcon} /></button></span></span>\n\n                    {category.menuItems.map(item => \n                      <div key={item.name} className={selectedMenuItem == item ? \"menu-item-container active\" : \"menu-item-container\"} onClick={() => {setSelectedMenuItem(item); setSelectedCategory(category)}}>\n                        <span className=\"subheading\">{item.name}</span>\n                        <span className=\"subheading\">${((item.price)/100).toFixed(2)}</span>\n                        <div className=\"menu-item-description\">{item.description}</div>\n                      </div>\n                    )}\n                  </div> \n                ))} \n              </div>\n              <div className=\"portal-menu-view\">\n                {selectedMenuItem != null && selectedMenuItem.name != defaultMenuItem.name ? \n                  <div>\n                    <span className=\"orange-heading\">{selectedMenuItem.name}</span>\n                    <span className=\"blue-heading\">${((selectedMenuItem.price)/100).toFixed(2)}</span>\n                    <span className=\"subheading\">Description</span>\n                    <div className=\"menu-item-description\">{selectedMenuItem.description}</div>\n                      <div>\n                        <span className=\"subheading\">Toppings</span>\n                        {(selectedMenuItem.foodOptions || []).map((topping =>\n                          <div key={topping.name} className=\"menu-item-description\"><b>{topping.name}:</b> {topping.options.map(option => option.name).join(\", \")}</div>\n                        ))}\n                      </div>\n                    <button className=\"orange\" onClick={() => {prepareEdit(); changeMode(\"editItem\"); setAddItemType(selectedMenuItem.foodOptions.length > 0 ? \"Customizable\" : \"Regular\")}}>Edit Menu Item</button>\n                  </div>\n                : \"\"}\n              </div>\n              <div className=\"portal-menu-view-buttons\">\n                <button className=\"orange\" onClick={() => changeMode(\"addCategory\")}>Create Category</button>\n              </div>\n            </div>\n\n            {mode == \"addCategory\" ?\n              <div className=\"portal-category-form-container\">\n                <button className=\"close\" onClick={() => changeMode(\"\")}>&#10005;</button>\n                <span className=\"subheading\">Category Name</span>\n                <form className=\"portal-category-form\">\n                    <input className=\"text-input\" type=\"text\" placeholder=\"Enter Category Name\" ref={categoryNameInput} />\n                    <button type=\"submit\" onClick={addCategory}>Create Category</button>\n                </form>\n              </div>\n            : \"\"}\n          </div>\n        : \n          <div>\n            {mode == \"addCategory\" ?\n              <div className=\"portal-category-form-container\">\n                <button className=\"close\" onClick={() => changeMode(\"\")}>&#10005;</button>\n                <span className=\"subheading\">Category Name</span>\n                <form className=\"portal-category-form\">\n                    <input className=\"text-input\" type=\"text\" placeholder=\"Enter Category Name\" ref={categoryNameInput} />\n                    <button type=\"submit\" onClick={addCategory}>Create Category</button>\n                </form>\n              </div>\n            : \"\"}\n            <header>\n              <img className=\"portal-empty-image\" src={bubbleIcon} />\n              <span className=\"subheading\">You have no items in your menu.</span>\n              <b>Start adding your menu items by clicking the buttons <br /> below!</b>\n            </header>\n\n            <div className=\"content\">\n              <button onClick={() => changeMode(\"addCategory\")}>Create Menu Category</button>\n            </div>\n          </div>\n        }\n        </div>\n      }\n    </article>\n  );\n}\n\nexport default PortalMenu;\n","import React, { useState, useEffect, useRef } from 'react';\n\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\n\nimport awsConfig from '../utils/awsConfig';\nimport * as queries from '../graphql/queries';\nimport * as mutations from '../graphql/mutations';\nimport * as customQueries from '../graphql/customQueries';\nimport * as customMutations from '../graphql/customMutations';\n\nimport bubbleIcon from '../assets/images/bubble-icon-2.svg';\nimport loadingBubbleIcon from '../assets/images/bubble-icon-1.svg';\n\nfunction PortalRewards(props) {\n  let restaurantSk = props.vendor.getVendor.restaurant.sk;\n  let restaurantId = restaurantSk.slice(restaurantSk.lastIndexOf(\"#\")+1)\n  const defaultReward = {\n    name: \"Jelly Joy\", \n    points: 5, \n    description: \"10% discount on all jelly patties\"\n  };\n  const nameInput = useRef();\n  const pointsInput = useRef();\n  const descriptionInput = useRef();\n\n  const [mode, changeMode] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [selectedRewardItem, selectRewardItem] = useState(defaultReward);\n  const [rewardItems, setRewardItems] = useState({\n    // Rewards: [{id: 1, name: \"Jelly Joy\", price: 5, description: \"10% discount on all jelly patties.\"}, \n    //           {id: 2, name: \"Krabby Patty Happy Hour\", price: 5, description: \"10% discount on all Krabby Patties between 12PM and 3PM.\"},\n    //           {id: 3, name: \"Seanut Superstar\", price: 10, description: \"Buy one get one free Seanut Brittle.\"},]\n    Rewards: []\n  });\n\n  useEffect(() => {\n    getData();\n  }, []);\n\n  async function getData() {\n    // API.graphql(graphqlOperation(queries.listVendorRewards, { filter: { menuId: { eq: props.restaurant.id } } })).then(({ data: { listVendorRewards } }) => {\n    //   setRewardItems({\n    //     Rewards: listVendorRewards.items\n    //   });\n    // }).catch((error) => {\n    //   console.log(error);\n    // });\n    setLoading(true);\n    const response = await API.graphql(graphqlOperation(customQueries.getVendorRewards, { menuId: restaurantId }));\n    // const response = await API.graphql(graphqlOperation(queries.listVendorRewards, { filter: { menuId: { eq: props.restaurant.id }}}));\n    console.log(\"resp:\", response);\n    const rewards = response.data.getVendorRewards.sort((reward1, reward2) => (reward1.points > reward2. points ? 1 : -1));\n    console.log(rewards);\n    setRewardItems({\n      Rewards: rewards\n    });\n    setLoading(false);\n  }\n\n  async function addReward() {\n    const reward = {\n      itemName: nameInput.current.value,\n      menuId: restaurantId,\n      points: parseInt(pointsInput.current.value),\n      date_active_from: null,\n      date_active_to: null,\n      discountAmount: null,\n      discountPercentage: null,\n      description: descriptionInput.current.value,\n    };\n\n    const response = await API.graphql(graphqlOperation(customMutations.createVendorReward, reward));\n    // const response = await API.graphql(graphqlOperation(mutations.createVendorReward, { input: reward }));\n    const newReward = response.data.createVendorReward;\n    console.log(\"newREWARD\", newReward);\n    changeMode(\"\");\n    console.log(\"hallo\");\n    await getData();\n    selectRewardItem(defaultReward);\n  }\n\n  async function editReward() {\n    const reward = {\n      id: selectedRewardItem.id,\n      itemName: nameInput.current.value,\n      menuId: props.restaurant.id,\n      points: parseInt(pointsInput.current.value),\n      description: descriptionInput.current.value,\n    };\n\n    await API.graphql(graphqlOperation(customMutations.updateVendorReward, reward));\n    // const response = await API.graphql(graphqlOperation(mutations.updateVendorReward, { input: reward }));\n    changeMode(\"\");\n    getData();\n    selectRewardItem(defaultReward);\n  }\n\n  async function deleteReward() {\n    const reward = {\n      id: selectedRewardItem.id,\n    }\n\n    await API.graphql(graphqlOperation(customMutations.deleteVendorReward, reward));\n    // const response = await API.graphql(graphqlOperation(mutations.deleteVendorReward, { input: reward }));\n    changeMode(\"\");\n    getData();\n    selectRewardItem(defaultReward);\n  }\n\n  return (\n    <article className=\"portal-rewards-container\">\n      {loading ? \n        <div>\n          <header>\n            <img className=\"portal-empty-image\" src={loadingBubbleIcon} />\n            <span className=\"subheading\">Loading...</span>\n          </header>\n        </div>  \n      :\n        <div>\n          {mode == \"addReward\" || mode == \"editReward\" ? \n            <div className=\"portal-rewards-form-container\">\n              <header>\n                <span className=\"orange-heading\">New Reward</span>\n              </header>\n\n              <div className=\"content\">\n                <form className=\"portal-rewards-form\">\n                  <div className=\"portal-rewards-form-name-section\">\n                    <span className=\"subheading\">Reward Name</span>\n                    <input className=\"text-input\" type=\"text\" placeholder=\"Enter Your Reward Name\" ref={nameInput} defaultValue={mode == \"editReward\" ? selectedRewardItem.itemName : \"\"}/>\n                  </div>\n                  \n                  <div className=\"portal-rewards-form-points-section\">\n                    <span className=\"subheading\">Point Value</span>\n                    <input className=\"text-input\" type=\"number\" placeholder=\"Enter Your Reward Point Value\" ref={pointsInput} defaultValue={mode == \"editReward\" ? selectedRewardItem.points : \"\"}/>\n                  </div>\n                  \n                  <div className=\"portal-rewards-form-description-section\">\n                    <span className=\"subheading\">Reward Description</span>\n                    <textarea className=\"text-input\" type=\"text\" placeholder=\"Enter Your Reward Description\" ref={descriptionInput} defaultValue={mode == \"editReward\" ? selectedRewardItem.description : \"\"}/>\n                  </div>\n                </form>\n                \n                <div className=\"portal-rewards-form-submit-section\">\n                  <div>\n                    {mode == \"editReward\" ? \n                      <button className=\"red-text\" onClick={deleteReward}>Delete</button>\n                    : \"\"}\n                  </div>\n                  <div>\n                    <button className=\"orange-text\" onClick={() => changeMode(\"\")}>Cancel</button>\n                    <button className=\"orange\" onClick={mode == \"addReward\" ? addReward : editReward}>{mode == \"addReward\" ? \"Add\" : \"Save\"} Reward</button>\n                  </div>\n                </div>\n              </div>\n            </div>\n          : rewardItems.Rewards.length > 0 ? \n            <div className=\"portal-rewards-list-container\">\n              <header>\n                <span className=\"orange-heading\">Active Rewards</span>\n              </header>\n\n              <div className=\"content\">\n                <div className=\"portal-rewards-list\">\n                  {Object.keys(rewardItems).map((category =>\n                    <div className=\"rewards-category-container\" key={category.id}>\n                      <span className=\"blue-heading\"></span>\n\n                      {rewardItems[category].map(item => \n                        <div key={item.id} className={selectedRewardItem == item ? \"reward-container active\" : \"reward-container\"} onClick={() => selectRewardItem(item)}>\n                          <span className=\"subheading\">{item.itemName}</span>\n                          <span className=\"subheading\">{item.points} pts</span>\n                          <div className=\"reward-description\">{item.description}</div>\n                        </div>\n                      )}\n                    </div> \n                  ))} \n                </div>\n                <div className=\"portal-rewards-view\">\n                  {selectedRewardItem != null && selectedRewardItem.name != defaultReward.name ? \n                  <div>\n                    <span className=\"orange-heading\">{selectedRewardItem.itemName}</span>\n                    <span className=\"blue-heading\">{selectedRewardItem.points} points</span>\n                    <span className=\"subheading\">Description</span>\n                    <div className=\"rewards-item-description\">{selectedRewardItem.description}</div>\n                    <button className=\"orange\" onClick={() => changeMode(\"editReward\")}>Edit Reward</button>\n                  </div>\n                  : \"\"}\n                </div>\n                <div className=\"portal-rewards-view-buttons\">\n                  <button className=\"orange\" onClick={() => changeMode(\"addReward\")}>Add Reward</button>\n                </div>\n              </div>\n            </div>\n          :\n            <div>\n              <header>\n                <img className=\"portal-empty-image\" src={bubbleIcon} />\n                <span className=\"subheading\">You have no active rewards.</span>\n                <b>Get users excited by adding <br /> reward opportunities!</b>\n              </header>\n\n              <div className=\"content\">\n                <button onClick={() => changeMode(\"addReward\")}>Add Reward</button>\n              </div>\n            </div>\n          }\n        </div>\n      }\n    </article>\n  );\n}\n\nexport default PortalRewards;\n","export default __webpack_public_path__ + \"static/media/location-icon.40cf1348.svg\";","export default __webpack_public_path__ + \"static/media/settings-design.972557d8.PNG\";","export default __webpack_public_path__ + \"static/media/phone-icon.92a2e6cb.svg\";","export default __webpack_public_path__ + \"static/media/clock-icon.d3af5bbb.svg\";","import React, { useState, useEffect, useRef } from 'react';\n\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\n\nimport awsConfig from '../utils/awsConfig';\nimport * as queries from '../graphql/queries';\nimport * as mutations from '../graphql/mutations';\nimport * as customMutations from '../graphql/customMutations';\n\nimport settingsDesign from '../assets/images/settings-design.PNG';\nimport locationIcon from '../assets/images/location-icon.svg';\nimport phoneIcon from '../assets/images/phone-icon.svg';\nimport clockIcon from '../assets/images/clock-icon.svg';\n\nfunction PortalSettings(props) {\n  const defaultVendor = {\n    id: props.restaurant.id != null && props.restaurant.id.length > 0 ? props.restaurant.id : \"-1\",\n    name: props.restaurant.name != null && props.restaurant.name.length > 0 ? props.restaurant.name : \"Your Restaurant Name\",\n    description: props.restaurant.description != null && props.restaurant.description.length > 0 ? props.restaurant.description : \"Your Restaurant Description\",\n    // tags: [\"Fast Food\", \"Outdoor Dining\"],\n    tags: [],\n    address: props.restaurant.address != null && props.restaurant.address.length > 0 && \n             props.restaurant.city != null && props.restaurant.city.length > 0 && \n             props.restaurant.state != null && props.restaurant.state.length > 0 && \n             props.restaurant.zip_code != null && props.restaurant.zip_code.length > 0 ?\n             `${props.restaurant.address}, ${props.restaurant.city}, ${props.restaurant.state} ${props.restaurant.zip_code}`\n             : \"Your Address, Your City, Your State Your Zip Code\",\n    contact: props.restaurant.restaurantOwnerName,\n    phoneNumber: props.restaurant.phoneNumber != null && props.restaurant.phoneNumber.length > 0 ? props.restaurant.phoneNumber : \"Your Restaurant Phone Number\",\n    email: props.restaurant.email != null && props.restaurant.email.length > 0 ? props.restaurant.email : \"Your Restaurant Email\",\n    hours: {\n      Sunday: props.restaurant.sundayHours != null && props.restaurant.sundayHours.length > 0 ? [props.restaurant.sundayHours.split(\"-\")[0], props.restaurant.sundayHours.split(\"-\")[1]] : [\"07:00 AM\", \"12:00 AM\"],\n      Monday: props.restaurant.mondayHours != null && props.restaurant.mondayHours.length > 0 ? [props.restaurant.mondayHours.split(\"-\")[0], props.restaurant.mondayHours.split(\"-\")[1]] : [\"07:00 AM\", \"12:00 AM\"],\n      Tuesday: props.restaurant.tuesdayHours != null && props.restaurant.tuesdayHours.length > 0 ? [props.restaurant.tuesdayHours.split(\"-\")[0], props.restaurant.tuesdayHours.split(\"-\")[1]] : [\"07:00 AM\", \"12:00 AM\"],\n      Wednesday: props.restaurant.wednesdayHours != null && props.restaurant.wednesdayHours.length > 0 ? [props.restaurant.wednesdayHours.split(\"-\")[0], props.restaurant.wednesdayHours.split(\"-\")[1]] : [\"07:00 AM\", \"12:00 AM\"],\n      Thursday: props.restaurant.thursdayHours != null && props.restaurant.thursdayHours.length > 0 ? [props.restaurant.thursdayHours.split(\"-\")[0], props.restaurant.thursdayHours.split(\"-\")[1]] : [\"07:00 AM\", \"12:00 AM\"],\n      Friday: props.restaurant.fridayHours != null && props.restaurant.fridayHours.length > 0 ? [props.restaurant.fridayHours.split(\"-\")[0], props.restaurant.fridayHours.split(\"-\")[1]] : [\"07:00 AM\", \"12:00 AM\"],\n      Saturday: props.restaurant.saturdayHours != null && props.restaurant.saturdayHours.length > 0 ? [props.restaurant.saturdayHours.split(\"-\")[0], props.restaurant.saturdayHours.split(\"-\")[1]] : [\"07:00 AM\", \"12:00 AM\"],\n    }\n  };\n\n  const nameInput = useRef();\n  const tagInput = useRef();\n  const descriptionInput = useRef();\n  const addressInput = useRef();\n  const phoneNumberInput = useRef();\n  const contactInput = useRef();\n  const emailInput = useRef();\n  const timeInput = useRef();\n\n  const [mode, changeMode] = useState(\"\");\n  const [vendor, setVendor] = useState(defaultVendor);\n  const [vendorForm, setVendorForm] = useState({\n    hours: {\n      Sunday: {startTime: defaultVendor.hours.Sunday[0].split(\" \")[0], startPeriod: defaultVendor.hours.Sunday[0].split(\" \")[1], endTime: defaultVendor.hours.Sunday[1].split(\" \")[0], endPeriod: defaultVendor.hours.Sunday[1].split(\" \")[1]},\n      Monday: {startTime: defaultVendor.hours.Monday[0].split(\" \")[0], startPeriod: defaultVendor.hours.Monday[0].split(\" \")[1], endTime: defaultVendor.hours.Monday[1].split(\" \")[0], endPeriod: defaultVendor.hours.Monday[1].split(\" \")[1]},\n      Tuesday: {startTime: defaultVendor.hours.Tuesday[0].split(\" \")[0], startPeriod: defaultVendor.hours.Tuesday[0].split(\" \")[1], endTime: defaultVendor.hours.Tuesday[1].split(\" \")[0], endPeriod: defaultVendor.hours.Tuesday[1].split(\" \")[1]},\n      Wednesday: {startTime: defaultVendor.hours.Wednesday[0].split(\" \")[0], startPeriod: defaultVendor.hours.Wednesday[0].split(\" \")[1], endTime: defaultVendor.hours.Wednesday[1].split(\" \")[0], endPeriod: defaultVendor.hours.Wednesday[1].split(\" \")[1]},\n      Thursday: {startTime: defaultVendor.hours.Thursday[0].split(\" \")[0], startPeriod: defaultVendor.hours.Thursday[0].split(\" \")[1], endTime: defaultVendor.hours.Thursday[1].split(\" \")[0], endPeriod: defaultVendor.hours.Thursday[1].split(\" \")[1]},\n      Friday: {startTime: defaultVendor.hours.Friday[0].split(\" \")[0], startPeriod: defaultVendor.hours.Friday[0].split(\" \")[1], endTime: defaultVendor.hours.Friday[1].split(\" \")[0], endPeriod: defaultVendor.hours.Friday[1].split(\" \")[1]},\n      Saturday: {startTime: defaultVendor.hours.Saturday[0].split(\" \")[0], startPeriod: defaultVendor.hours.Saturday[0].split(\" \")[1], endTime: defaultVendor.hours.Saturday[1].split(\" \")[0], endPeriod: defaultVendor.hours.Saturday[1].split(\" \")[1]},\n    }\n  });\n\n  function changeVendorHours(e, day, dayHalf, timePlace) {\n    const vendorFormHours = vendorForm.hours;\n    let currentHours = vendorForm.hours[day][dayHalf];\n    vendorForm.hours[day][dayHalf] = currentHours.substr(0, timePlace) + e.target.value + currentHours.substr(timePlace + e.target.value.length);\n    setVendorForm({...vendorForm, vendorFormHours});\n    console.log(vendorForm.hours)\n  }\n\n  function changeVendorHoursPeriod(day, periodType, period) {\n    const vendorFormHours = vendorForm.hours;\n    vendorForm.hours[day][periodType] = period;\n    setVendorForm({...vendorForm, vendorFormHours});\n  }\n\n  async function updateVendor() {\n    const address = addressInput.current.value.split(\", \")[0];\n    const city = addressInput.current.value.split(\", \")[1];\n    const state = addressInput.current.value.split(\", \")[2].slice(0, -6);\n    const zipCode = addressInput.current.value.split(\", \")[2].slice(-5);\n    let phoneNumber = phoneNumberInput.current.value.replaceAll(/-/g, \"\").replaceAll(/\\s/g, \"\");\n    if (phoneNumber.charAt(0) != \"+\") {\n        phoneNumber = \"+\" + (phoneNumber.length == 10 ? \"1\" : \"\") + phoneNumber;\n    }\n\n    console.log(\"UP\", vendor)\n\n    // const updatedRestaurant = {\n    //   id: props.restaurant.id,\n    //   input: { isOpen: \"false\", },\n    // };\n\n    // console.log(\"TOGs\", props.restaurant.id)\n    // const updatedRestaurant = {\n    //   id: props.restaurant.id,\n    //   input: { isOpen: \"false\", },\n    // };\n\n    // console.log(\"UR\", updatedRestaurant);\n\n    // // const updatedRestaurantResponse = await API.graphql(graphqlOperation(mutations.updateRestaurant, { input: updatedRestaurant }));\n    // const updatedRestaurantResponse = await API.graphql(graphqlOperation(customMutations.updateRestaurant, updatedRestaurant));\n    // console.log(updatedRestaurantResponse)\n\n    const updatedRestaurant = {\n      id: vendor.id,\n      input: {\n        name: nameInput.current.value,\n        description: descriptionInput.current.value,\n        phoneNumber: phoneNumber,\n        // email: emailInput.current.value,\n        address: address,\n        city: city,\n        state: state,\n        zip_code: zipCode,\n        restaurantOwnerName: contactInput.current.value,\n        sundayHours: vendorForm.hours.Sunday.startTime + \" \" + vendorForm.hours.Sunday.startPeriod + \"-\" + vendorForm.hours.Sunday.endTime + \" \" + vendorForm.hours.Sunday.endPeriod,\n        mondayHours: vendorForm.hours.Monday.startTime + \" \" + vendorForm.hours.Monday.startPeriod + \"-\" + vendorForm.hours.Monday.endTime + \" \" + vendorForm.hours.Monday.endPeriod,\n        tuesdayHours: vendorForm.hours.Tuesday.startTime + \" \" + vendorForm.hours.Tuesday.startPeriod + \"-\" + vendorForm.hours.Tuesday.endTime + \" \" + vendorForm.hours.Tuesday.endPeriod,\n        wednesdayHours: vendorForm.hours.Wednesday.startTime + \" \" + vendorForm.hours.Wednesday.startPeriod + \"-\" + vendorForm.hours.Wednesday.endTime + \" \" + vendorForm.hours.Wednesday.endPeriod,\n        thursdayHours: vendorForm.hours.Thursday.startTime + \" \" + vendorForm.hours.Thursday.startPeriod + \"-\" + vendorForm.hours.Thursday.endTime + \" \" + vendorForm.hours.Thursday.endPeriod,\n        fridayHours: vendorForm.hours.Friday.startTime + \" \" + vendorForm.hours.Friday.startPeriod + \"-\" + vendorForm.hours.Friday.endTime + \" \" + vendorForm.hours.Friday.endPeriod,\n        saturdayHours: vendorForm.hours.Saturday.startTime + \" \" + vendorForm.hours.Saturday.startPeriod + \"-\" + vendorForm.hours.Saturday.endTime + \" \" + vendorForm.hours.Saturday.endPeriod,\n      },\n    };\n\n    // const updatedRestaurantResponse = await API.graphql(graphqlOperation(customMutations.updateRestaurant, updatedRestaurant));\n    // console.log(updatedRestaurantResponse);\n    changeMode(\"\");\n\n    // API.graphql(graphqlOperation(customMutations.updateRestaurant, updatedVendor))\n    // .then(updateRestaurant => {\n    //   console.log('UPDATED RESTAURANT', updateRestaurant);\n    //   props.getData();\n    //   changeMode('');\n    // })\n    // .catch(err => {\n    //   console.log(err);\n    // });\n    // API.graphql({ query: mutations.updateRestaurant, variables: { input: updatedVendor } }).then(({ data: { updateRestaurant } }) => {\n    //   console.log(\"UPDATE\", updateRestaurant);\n    //   props.getData();\n    //   // setVendor(oldVendor => ({\n    //   //   ...oldVendor,\n    //   //   description: updateRestaurant.description,\n    //   // }))\n    //   changeMode(\"\")\n    // }).catch((error) => {\n    //   console.log(error);\n    // });\n  }\n  \n  return (\n    <article className=\"portal-settings-container\">\n      {mode == \"edit\" ?\n        <div className=\"portal-settings-form-container\">\n          <header>\n            <span className=\"orange-heading\">Edit Information</span>\n          </header>\n\n          <div className=\"content\">\n            <form className=\"portal-vendor-info-form\">\n              <div id=\"portal-settings-form-name-section\">\n                <span className=\"subheading\">Name</span>\n                <input className=\"text-input\" type=\"text\" placeholder=\"Vendor Name\" defaultValue={vendor.name} ref={nameInput} />\n              </div>\n              \n              <div id=\"portal-settings-form-description-section\">\n                <span className=\"subheading\">Description</span>\n                <textarea className=\"text-input\" type=\"text\" placeholder=\"Vendor Description\" defaultValue={vendor.description} ref={descriptionInput} />\n              </div>\n              \n              <div id=\"portal-settings-form-tags-section\">\n                {/*<span className=\"subheading\">Tags</span>\n                <input className=\"text-input\" type=\"text\" placeholder=\"Fast Food, Outdoor Dining\" ref={tagInput} />*/}\n              </div>\n              \n              <div id=\"portal-settings-form-address-section\">\n                <span className=\"subheading\">Address</span>\n                <input className=\"text-input\" type=\"text\" placeholder=\"Vendor Address\" defaultValue={vendor.address} ref={addressInput} />\n              </div>\n              \n              <div id=\"portal-settings-form-contact-section\">\n                <span className=\"subheading\">Point of Contact</span>\n                <input className=\"text-input\" type=\"text\" placeholder=\"Vendor Point of Contact\" defaultValue={vendor.contact} ref={contactInput} />\n              </div>\n\n              <div id=\"portal-settings-form-phone-section\">\n                <span className=\"subheading\">Phone Number</span>\n                <input className=\"text-input\" type=\"text\" placeholder=\"123-456-7890\" defaultValue={vendor.phoneNumber} ref={phoneNumberInput} />\n              </div>\n\n              <div id=\"portal-settings-form-email-section\">\n                <span className=\"subheading\">Email Address</span>\n                <input className=\"text-input\" type=\"text\" placeholder=\"Vendor Email\" defaultValue={vendor.email} ref={emailInput} readOnly />\n              </div>\n\n              <div id=\"portal-settings-form-hours-section\">\n                <span className=\"subheading\">Hours of Operations</span>\n                {Object.keys(vendor.hours).map((day => \n                  <div key={day}>\n                    <span>{day}:</span>\n                    <span>\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][0][0]} onChange={(e) => changeVendorHours(e, day, \"startTime\", 0)} maxLength=\"1\"/>\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][0][1]} onChange={(e) => changeVendorHours(e, day, \"startTime\", 1)} maxLength=\"1\" />\n                      :\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][0][3]} onChange={(e) => changeVendorHours(e, day, \"startTime\", 3)} maxLength=\"1\" />\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][0][4]} onChange={(e) => changeVendorHours(e, day, \"startTime\", 4)} maxLength=\"1\" />\n                      <div className=\"am-pm-radio\">\n                        <span className={vendorForm.hours[day].startPeriod == \"AM\" ? \"am-pm-radio-option active\" : \"am-pm-radio-option\"} onClick={() => changeVendorHoursPeriod(day, \"startPeriod\", \"AM\")}>AM</span>\n                        <span className={vendorForm.hours[day].startPeriod == \"PM\" ? \"am-pm-radio-option active\" : \"am-pm-radio-option\"} onClick={() => changeVendorHoursPeriod(day, \"startPeriod\", \"PM\")}>PM</span>\n                      </div>\n                      <span className=\"hyphen\">-</span>\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][1][0]} onChange={(e) => changeVendorHours(e, day, \"endTime\", 0)} maxLength=\"1\" />\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][1][1]} onChange={(e) => changeVendorHours(e, day, \"endTime\", 1)} maxLength=\"1\" />\n                      :\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][1][3]} onChange={(e) => changeVendorHours(e, day, \"endTime\", 3)} maxLength=\"1\" />\n                      <input className=\"number-input\" type=\"text\" defaultValue={vendor.hours[day][1][4]} onChange={(e) => changeVendorHours(e, day, \"endTime\", 4)} maxLength=\"1\" />\n                      <div className=\"am-pm-radio\">\n                      <span className={vendorForm.hours[day].endPeriod == \"AM\" ? \"am-pm-radio-option active\" : \"am-pm-radio-option\"} onClick={() => changeVendorHoursPeriod(day, \"endPeriod\", \"AM\")}>AM</span>\n                        <span className={vendorForm.hours[day].endPeriod == \"PM\" ? \"am-pm-radio-option active\" : \"am-pm-radio-option\"} onClick={() => changeVendorHoursPeriod(day, \"endPeriod\", \"PM\")}>PM</span>\n                      </div>\n                    </span>\n                  </div>\n                ))}\n              </div>\n            </form>\n            \n            <div id=\"portal-settings-form-submit-section\">\n              <button className=\"orange-text\" onClick={() => changeMode(\"\")}>Cancel</button>\n              <button className=\"orange\" onClick={() => updateVendor()}>Update Information</button>\n            </div>\n          </div>\n        </div>\n      :\n        <div className=\"portal-vendor-info-container\">\n          <header>\n            <span className=\"subheading\">Toppings Vendor</span>\n            <span className=\"orange-heading\">{vendor.name}</span>\n            <span className=\"caption\">{vendor.description}</span>\n            {vendor.tags.map((tag => \n              <button key={tag} className=\"tag\">{tag}</button>  \n            ))}\n          </header>\n\n          <div className=\"content\">\n            <div className=\"vendor-info-sections-container\">\n              <div id=\"vendor-location-info-section\" className=\"vendor-info-section\">\n                <img src={locationIcon} />\n                <div>\n                  <span className=\"subheading\">Location</span>\n                  <span>{vendor.address}</span>\n                </div>\n              </div>\n              <div id=\"vendor-contact-info-section\" className=\"vendor-info-section\">\n                <img src={phoneIcon} />\n                <div>\n                  <span className=\"subheading\">Contact</span>\n                  <div id=\"vendor-contact-info\">\n                    <span>Main Point of Contact:</span>\n                    <span>{vendor.contact}</span>\n                    <span>Phone Number</span>\n                    <span>{vendor.phoneNumber}</span>\n                    <span>Email Address</span>\n                    <span>{vendor.email}</span>\n                  </div>\n                </div>\n              </div>\n              <div id=\"vendor-hours-info-section\" className=\"vendor-info-section\">\n                <img src={clockIcon} />\n                <div>\n                  <span className=\"subheading\">Hours</span>\n                  <div id=\"vendor-hours-info\">\n                    {Object.keys(vendor.hours).map((day => \n                      <div key={day}>\n                        <span>{day}:</span>\n                        <span>{parseInt(vendor.hours[day][0].split(\":\")[0]) + \":\" + vendor.hours[day][0].split(\":\")[1]} - {parseInt(vendor.hours[day][1].split(\":\")[0]) + \":\" + vendor.hours[day][1].split(\":\")[1]}</span>\n                      </div>\n                    ))}\n                  </div>\n                  </div>\n              </div>\n              <div></div>\n              <div id=\"vendor-info-button-section\">\n                <button className=\"orange\" onClick={() => changeMode(\"edit\")}>Edit Information</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      }\n    </article>\n  );\n}\n\nexport default PortalSettings;\n","export default __webpack_public_path__ + \"static/media/portal-orders-icon.337bc697.svg\";","export default __webpack_public_path__ + \"static/media/portal-dashboard-icon.72eba466.svg\";","export default __webpack_public_path__ + \"static/media/portal-terms-service-icon.d30cdcaa.svg\";","export default __webpack_public_path__ + \"static/media/portal-menu-icon.9ea934fe.svg\";","export default __webpack_public_path__ + \"static/media/portal-rewards-icon.6fe63e0d.svg\";","export default __webpack_public_path__ + \"static/media/portal-settings-icon.ee0f252a.svg\";","export default __webpack_public_path__ + \"static/media/portal-logout-icon.401bf9b0.svg\";","import React, { useState, useEffect, useRef } from 'react';\nimport { Switch, Route, Link, Redirect } from 'react-router-dom';\n\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\nimport { useQuery } from '@apollo/client';\n\nimport awsConfig from '../utils/awsConfig';\nimport * as queries from '../graphql/queries';\nimport * as customQueries from '../graphql/customQueries';\nimport * as mutations from '../graphql/mutations';\nimport { getCurrentUser, setCurrentUser, getCurrentPage, setCurrentPage, clearSession } from '../utils/session';\nimport PortalDashboard from './PortalDashboard';\nimport PortalOrders from './PortalOrders';\nimport PortalTermsService from './PortalTermsService';\nimport PortalMenu from './PortalMenu';\nimport PortalRewards from './PortalRewards';\nimport PortalSettings from './PortalSettings';\n\nimport logo from '../assets/images/logo-white.png';\nimport dashboardIcon from '../assets/images/portal-dashboard-icon.svg';\nimport ordersIcon from '../assets/images/portal-orders-icon.svg';\nimport termsServiceIcon from '../assets/images/portal-terms-service-icon.svg';\nimport menuIcon from '../assets/images/portal-menu-icon.svg';\nimport rewardsIcon from '../assets/images/portal-rewards-icon.svg';\nimport settingsIcon from '../assets/images/portal-settings-icon.svg';\nimport logoutIcon from '../assets/images/portal-logout-icon.svg';\n\nAmplify.configure(awsConfig);\n\nfunction Portal(props) {\n  const { Cognito } = props;\n\n  const [portalSelection, setPortalSelection] = useState(window.location.href.slice(window.location.href.indexOf(\"/portal/\") + \"/portal/\".length));\n  const [loggedIn, setLoggedIn] = useState(getCurrentUser() != null);\n  const [sideBar, setSideBar] = useState(false);\n\n  useEffect(() => {\n    props.toggleShowHeader(false);\n    console.log(\"U\", props.user)\n  }, []);\n\n  let { data: vendorData, error: vendorError, loading: vendorLoading } = useQuery(customQueries.GET_RESTAURANT_BY_OWNER);\n\n  let restaurant;\n\n  if (vendorData?.getRestaurantByOwner) {\n    restaurant = vendorData.getRestaurantByOwner;\n  }\n\n  function toggleSideBar() {\n    setSideBar(!sideBar);\n    console.log(\"toggle\", sideBar);\n  }\n\n  async function logout() {\n    await Cognito.signOut();\n    setLoggedIn(false);\n    clearSession(\"user\");\n    clearSession(\"page\");\n    props.toggleShowHeader(true);\n  }\n  if (vendorLoading) return null;\n  if (vendorError) {\n    console.log('error', vendorError);\n    return null;\n  }\n\n  return (\n    <section className=\"portal-login-container\">\n      {loggedIn ?\n        <article className=\"portal-container\">\n          {/* <div>\n            <button style={{position: \"absolute\", marginLeft: \"20px\"}} className=\"orange\" onClick={() => toggleSideBar()}>Toggle Sidebar</button>\n          </div> */}\n          {sideBar ? \n            <nav>\n              <Link to=\"/\"><img className=\"portal-toppings-logo\" src={logo} /></Link>\n              <ul className=\"nav-buttons\">\n                {/*<li><Link to=\"/portal/dashboard\"><span className={portalSelection == \"dashboard\" ? \"portal-nav-option active\" : \"portal-nav-option\"} onClick={() => setPortalSelection(\"dashboard\")}><img src={dashboardIcon} /> Dashboard</span></Link></li>*/}\n                <li><Link to=\"/portal/orders\" onClick={() => setCurrentPage(\"orders\")}><span className={portalSelection == \"orders\" ? \"portal-nav-option active\" : \"portal-nav-option\"} onClick={() => setPortalSelection(\"orders\")}><img src={ordersIcon} /> Orders</span></Link></li>\n                <li><Link to=\"/portal/terms-of-service\" onClick={() => setCurrentPage(\"terms-of-service\")}><span className={portalSelection == \"terms-of-service\" ? \"portal-nav-option active\" : \"portal-nav-option\"} onClick={() => setPortalSelection(\"terms-of-service\")}><img src={termsServiceIcon} /> Terms of Service</span></Link></li>\n                <li><Link to=\"/portal/menu\" onClick={() => setCurrentPage(\"menu\")}><span className={portalSelection == \"menu\" ? \"portal-nav-option active\" : \"portal-nav-option\"} onClick={() => setPortalSelection(\"menu\")}><img src={menuIcon} /> Your Menu</span></Link></li>\n                <li><Link to=\"/portal/rewards\" onClick={() => setCurrentPage(\"rewards\")}><span className={portalSelection == \"rewards\" ? \"portal-nav-option active\" : \"portal-nav-option\"} onClick={() => setPortalSelection(\"rewards\")}><img src={rewardsIcon} /> Your Active Rewards</span></Link></li>\n                <li><Link to=\"/portal/settings\" onClick={() => setCurrentPage(\"settings\")}><span className={portalSelection == \"settings\" ? \"portal-nav-option active\" : \"portal-nav-option\"} onClick={() => setPortalSelection(\"settings\")}><img src={settingsIcon} /> Account Settings</span></Link></li>\n                <li><span className=\"portal-nav-option\" onClick={logout}><img src={logoutIcon} /> Log Out</span></li>\n              </ul>\n              <div className=\"portal-version-label\">Version 2.0.1</div>\n            </nav>\n          : \n          \"\"\n          }\n          \n\n          <main>\n            <Switch>\n              <Route path=\"/portal/dashboard\" component={() => <PortalDashboard restaurant={restaurant} />} />\n              <Route path=\"/portal/orders\" component={() => <PortalOrders restaurant={restaurant} />} />\n              <Route path=\"/portal/terms-of-service\" component={() => <PortalTermsService restaurant={restaurant} />} />\n              <Route path=\"/portal/menu\" component={() => <PortalMenu vendor={restaurant} />} />\n              <Route path=\"/portal/rewards\" component={() => <PortalRewards vendor={restaurant} />} />\n              <Route path=\"/portal/settings\" component={() => <PortalSettings restaurant={restaurant} />} />\n            </Switch>\n          </main>\n        </article>\n        :\n        <Redirect to=\"/portal-auth/sign-in\" />\n      }\n    </section>\n  );\n}\n\nexport default Portal;\n","import React, { useState, useEffect, useRef } from 'react';\nimport { Switch, Route, Link, Redirect } from 'react-router-dom';\n\nimport { setUnverifiedUser, getUnverifiedUser } from '../utils/session';\nimport CognitoClient from '../utils/CognitoClient';\nimport Amplify, { Auth, API, graphqlOperation } from 'aws-amplify';\nimport awsConfig from '../utils/awsConfig';\nimport * as queries from '../graphql/queries';\nimport * as mutations from '../graphql/mutations';\nimport * as customMutations from '../graphql/customMutations';\n\nimport { getCurrentUser, setCurrentUser, getCurrentPage, setCurrentPage, clearSession, setTokens } from '../utils/session';\n\nAmplify.configure(awsConfig);\n\nfunction PortalSignUp(props) {\n  const { Cognito } = props;\n\n  const nameInput = useRef();\n  const emailInput = useRef();\n  const passwordInput = useRef();\n  const phoneNumberInput = useRef();\n  const codeInput = useRef();\n\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const [successMsg, setSuccessMsg] = useState(\"\");\n  const [signedUp, setSignedUp] = useState(false);\n  const [confirmed, setConfirmed] = useState(false);\n  const [loggedIn, setLoggedIn] = useState(false);\n  const [userName, setUserName] = useState(false);\n\n  useEffect(() => {\n    props.toggleShowHeader(true);\n\n    let user = getCurrentUser();\n    let page = getCurrentPage();\n    if (user != null && page != null) {\n      console.log(user);\n      emailInput.current.value = user.username;\n      passwordInput.current.value = user.password;\n      login(null);\n      console.log(\"user\", user);\n    }\n  }, []);\n\n  async function signUp(e) {\n    e.preventDefault();\n    let name = nameInput.current.value;\n    let email = emailInput.current.value;\n    let password = passwordInput.current.value;\n    let phoneNumber = phoneNumberInput.current.value.replaceAll(/-/g, \"\").replaceAll(/\\s/g, \"\");\n\n    if (phoneNumber.charAt(0) !== \"+\") {\n        phoneNumber = \"+\" + (phoneNumber.length === 10 ? \"1\" : \"\") + phoneNumber;\n    }\n    \n    let unverifiedUser;\n\n    if (name.length > 0 && email.length > 0 && phoneNumber.length >= 10 && password.length > 0) {\n      try {\n        unverifiedUser = await Cognito.signUp(email, password, [\n          {\n            Name: 'name',\n            Value: name,\n          },\n          {\n            Name: 'phone_number',\n            Value: phoneNumber,\n          },\n          {\n            Name: 'custom:isUser',\n            Value: '0',\n          }\n        ]);\n      } catch (err) {\n        setErrorMsg(err.message);\n      }\n\n      setUnverifiedUser(unverifiedUser);\n      setSignedUp(true);\n      setSuccessMsg(\"Account created, please enter the confirmation code.\");\n      setErrorMsg(\"\");\n      setUserName(name);\n    } else {\n      setErrorMsg(\"Account info is incomplete.\");\n    }\n  }\n\n  async function confirmSignUp(e) {\n    e.preventDefault();\n    let name = userName;\n    let email = emailInput.current.value;\n    let code = codeInput.current.value;\n\n    let unverifiedUser = getUnverifiedUser();\n\n    if (email.length > 0 && code.length > 0) {\n      await Cognito.confirmRegistration(unverifiedUser.userSub, code);\n      // await Auth.confirmSignUp(email, code)\n        // setSignedUp(true);\n      // }).catch((error) => {\n      //   setErrorMsg(error.message);\n      //   if (error.message.indexOf(\"Current status is CONFIRMED\") > -1 /*|| error.message.indexOf(\"Invalid JSON\") > -1*/) {\n      //     setConfirmed(true);\n      //     setErrorMsg(\"\");\n      //     setSuccessMsg(\"Account confirmed, please sign in.\");\n\n      //     const user = {\n      //       name: name,\n      //       email: email\n      //     }\n      //   }\n      // });\n      setConfirmed(true);\n      setErrorMsg(\"\");\n      setSuccessMsg(\"Account confirmed, please sign in.\");\n\n      // const restaurant = {\n      //   name: \"Your Restaurant Name\",\n      //   email: email,\n      //   address: \"Your Address\",\n      //   city: \"Your City\",\n      //   description: \"Your Restaurant Description\",\n      //   lat: null,\n      //   long: null,\n      //   phone_number: null,\n      //   state: \"Your State\",\n      //   zip_code: \"Your Zip Code\"\n      // };\n\n      // API.graphql(graphqlOperation(customMutations.createRestaurant, restaurant))\n      // .then(createRestaurantResp => {\n      //   console.log('Create Restaurant', createRestaurantResp);\n      //   setErrorMsg('');\n      // })\n      // .catch(err => {\n      //   console.log(err);\n      // });\n    } else {\n      setErrorMsg(\"Account info is incomplete.\");\n    }\n  }\n\n  async function login(e) {\n    console.log('dalk');\n    if (e != null) {\n      console.log('wot');\n      e.preventDefault();\n    }\n\n    console.log(awsConfig);\n\n    let email = emailInput.current.value;\n    let password = passwordInput.current.value;\n    \n    console.log('HI');\n    if (email.length > 0 && password.length > 0) {\n      const user = { \n        username: email, \n        password: password,\n      };\n      console.log(user);\n\n      const result = await Cognito.authenticateUser(email, password);\n      // const result = await Auth.signIn(user); //.then(() => {\n      console.log(\"auth sign in\", result);\n      setTokens(result);\n\n      const currentUser = await Cognito.getCurrentUserAttributes();\n\n        // const restaurant = {\n        //   name: \"Your Restaurant Name\",\n        //   userId: currentUser.attributes.sub,\n        //   address: \"Your Address\",\n        //   city: \"Your City\",\n        //   description: \"Your Restaurant Description\",\n        //   lat: 100.0,\n        //   long: 100.0,\n        //   phoneNumber: '+15105132142',\n        //   state: \"Your State\",\n        //   zip_code: \"Your Zip Code\",\n        //   isOpen: \"true\",\n        // };\n        \n        // await API.graphql(graphqlOperation(customMutations.createRestaurant, restaurant));\n\n        const userWithSub = {\n          ...user,\n          cognitoId: currentUser[0].Value,\n        };\n        setCurrentUser(userWithSub);\n      //   .then(createRestaurantResp => {\n      //     console.log('Create Restaurant', createRestaurantResp);\n      //     setErrorMsg('');\n      //   })\n      //   .catch(err => {\n      //     console.log(err);\n      //   });\n      // }).catch((error) => {\n      //   setErrorMsg(error.message);\n      // });\n            \n      if (getCurrentPage() == null) {\n        setCurrentPage(\"orders\");\n      }\n\n\n      props.setUser(userWithSub);\n      setLoggedIn(true);\n    } else {\n      setErrorMsg(\"Login info is incomplete.\");\n    }\n  }\n\n  return (\n    <section className=\"portal-login-container\">\n      {loggedIn ? \n        <Redirect to={`/portal/${getCurrentPage()}`} />\n        :\n        <article className=\"login-container\">\n          <div className=\"login-panel\">\n            <h1>\n              Vendor Portal\n            </h1>\n\n            <Switch>\n              <Route path=\"/portal-auth/sign-up\">\n                {!signedUp && !confirmed ? \n                  <form onSubmit={signUp}>\n                    {errorMsg != \"\" ? <span className=\"login-message\">{errorMsg}</span> : \"\"}\n                    <label htmlFor=\"name\">Name</label><input className=\"text-input\" type=\"text\" ref={nameInput} />\n                    <label htmlFor=\"email\">Email Address</label><input className=\"text-input\" type=\"email\" ref={emailInput} />\n                    <label htmlFor=\"phone\">Phone Number</label><input className=\"text-input\" type=\"tel\" ref={phoneNumberInput} defaultValue=\"\" />\n                    <label htmlFor=\"password\">Password</label><input className=\"text-input\" type=\"password\" ref={passwordInput} />\n                    <input className=\"submit-button\" type=\"submit\" value=\"Submit\" />\n                  </form>\n                : signedUp && !confirmed ?\n                  <form onSubmit={confirmSignUp}>\n                    {errorMsg == \"\" && successMsg != \"\" ? <span className=\"login-message success\">{successMsg}</span> : \"\"}\n                    {errorMsg != \"\" ? <span className=\"login-message\">{errorMsg}</span> : \"\"}\n                    <label htmlFor=\"email\">Email Address</label><input className=\"text-input\" type=\"email\" ref={emailInput} />\n                    <label htmlFor=\"code\">Confirmation Code</label><input className=\"text-input\" type=\"text\" ref={codeInput} />\n                    <input className=\"submit-button\" type=\"submit\" value=\"Submit\" />\n                  </form>\n                : \n                  <Redirect to=\"/portal-auth/sign-in\" />\n                }\n\n                <span>Already have an account? <Link to=\"/portal-auth/sign-in\">Sign In</Link></span>\n              </Route>\n              <Route path=\"/portal-auth/sign-in\">\n                <form onSubmit={login}>\n                  {errorMsg == \"\" && successMsg != \"\" ? <span className=\"login-message success\">{successMsg}</span> : \"\"}\n                  {errorMsg != \"\" ? <span className=\"login-message\">{errorMsg}</span> : \"\"}\n                  <label htmlFor=\"email\">Email Address</label><input className=\"text-input\" ref={emailInput} />\n                  <label htmlFor=\"password\">Password</label><input className=\"text-input\" type=\"password\" ref={passwordInput} />\n                  <input className=\"submit-button\" type=\"submit\" value=\"Submit\" />\n                </form>\n\n                <span>Don't have an account? <Link to=\"/portal-auth/sign-up\">Sign Up</Link></span>\n              </Route>\n            </Switch>\n          </div>\n        </article>\n      }\n    </section>\n  );\n}\n\nexport default PortalSignUp;\n","import './styles/App.css';\nimport './styles/Portal.css';\nimport './styles/PortalAuthentication.css';\nimport './styles/PortalOrders.css';\nimport './styles/PortalTermsService.css';\nimport './styles/PortalMenu.css';\nimport './styles/PortalRewards.css';\nimport './styles/PortalSettings.css';\n\nimport React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Route, Link, Redirect } from 'react-router-dom';\nimport { ApolloProvider } from '@apollo/client';\n\nimport { getCurrentUser, setupSession, clearSession, getCurrentPage } from './utils/session';\nimport client from './client';\nimport CognitoClient from './utils/CognitoClient';\n\nimport logo from './assets/images/logo-white.png';\nimport Portal from './pages/Portal';\nimport PortalAuthentication from './pages/PortalAuthentication';\n\nfunction App() {\n  const [showHeader, toggleShowHeader] = useState(true);\n  const [user, setUser] = useState({});\n\n  const Cognito = new CognitoClient();\n\n  return (\n    <ApolloProvider client={client}>\n      <div className=\"wrapper\">\n        <Route exact path=\"/portal/:selection\" render={() => <Portal toggleShowHeader={toggleShowHeader} user={user} setUser={setUser} />} />\n        <Route exact path=\"/portal-auth/:selection\" render={() => <PortalAuthentication toggleShowHeader={toggleShowHeader} user={user} setUser={setUser} Cognito={Cognito} />} />\n        \n        <Redirect to={`/portal-auth/sign-in`} />\n        {showHeader ?\n          <header className=\"primary\">\n            <nav>\n              <span className=\"heading\"><Link className=\"nav-link\" to=\"/portal-auth/sign-in\"><img src={logo} /></Link></span>\n\n              <ul className=\"nav-buttons links\">\n                {/*<li><Link className=\"nav-link\" to=\"/\">About Us</Link></li>*/}\n                {/*<li><Link className=\"nav-link\" to=\"/portal-auth/sign-in\">Vendor Portal</Link></li>*/}\n              </ul>\n            </nav>\n          </header>\n        : \"\"}\n      </div>\n    </ApolloProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { HashRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <HashRouter>\n    <App />\n  </HashRouter>,\n  document.getElementById('root')\n);"],"sourceRoot":""}